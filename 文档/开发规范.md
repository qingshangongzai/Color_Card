# Color Card å¼€å‘è§„èŒƒ

## 1. æ¦‚è¿°

### 1.1 é¡¹ç›®ç®€ä»‹

Color Cardï¼ˆå–è‰²å¡ï¼‰æ˜¯ä¸€ä¸ªåŸºäº PySide6 å¼€å‘çš„å›¾ç‰‡é¢œè‰²åˆ†æå·¥å…·ï¼Œç”¨äºä»å›¾ç‰‡ä¸­æå–é¢œè‰²ä¿¡æ¯å’Œåˆ†ææ˜åº¦åˆ†å¸ƒï¼Œæ”¯æŒå¤šç§è‰²å½©æ¨¡å¼æ˜¾ç¤ºã€‚

**æ ¸å¿ƒåŠŸèƒ½ï¼š**

- å›¾ç‰‡å¯¼å…¥ï¼ˆJPGã€PNGã€BMPã€GIFï¼‰
- è‰²å½©æå–ï¼š5ä¸ªå¯æ‹–åŠ¨å–è‰²ç‚¹ï¼Œå®æ—¶æ˜¾ç¤ºè‰²å½©å€¼
- å¤šè‰²å½©æ¨¡å¼ï¼šHSBã€LABã€HSLã€CMYKã€RGB
- æ˜åº¦æå–ä¸ç›´æ–¹å›¾å¯è§†åŒ–
- åŒé¢æ¿æ•°æ®åŒæ­¥

### 1.2 å¼€å‘ç¯å¢ƒ

- **æ“ä½œç³»ç»Ÿ**ï¼šWindows 10/11
- **Python ç‰ˆæœ¬**ï¼š3.11+
- **GUI æ¡†æ¶**ï¼šPySide6 + PySide6-Fluent-Widgets
- **æ¨è IDE**ï¼šVS Codeã€PyCharmã€Trae

### 1.3 é¡¹ç›®ç»“æ„

```
color_card/
â”œâ”€â”€ main.py                 # ç¨‹åºå…¥å£
â”œâ”€â”€ version.py              # ç‰ˆæœ¬ç®¡ç†æ¨¡å—
â”œâ”€â”€ requirements.txt        # é¡¹ç›®ä¾èµ–
â”œâ”€â”€ README.md               # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ LICENSE                 # å¼€æºè®¸å¯è¯
â”œâ”€â”€ å¼€å‘è§„èŒƒ.md              # æœ¬æ–‡ä»¶
â”œâ”€â”€ core/                   # æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ç›®å½•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ color.py           # é¢œè‰²å¤„ç†æ¨¡å—ï¼ˆé¢œè‰²è½¬æ¢ã€æ˜åº¦è®¡ç®—ã€é…è‰²ç”Ÿæˆç®—æ³•ï¼‰
â”‚   â”œâ”€â”€ colorblind.py      # è‰²ç›²æ¨¡æ‹Ÿæ¨¡å—ï¼ˆè‰²ç›²ç±»å‹å®šä¹‰ã€LMSè‰²å½©ç©ºé—´è½¬æ¢ã€è‰²ç›²æ¨¡æ‹Ÿç®—æ³•ï¼‰
â”‚   â”œâ”€â”€ color_data.py      # é¢œè‰²æ•°æ®ç®¡ç†æ¨¡å—ï¼ˆå»¶è¿ŸåŠ è½½å„é¢œè‰²åº“æ•°æ®ï¼‰
â”‚   â”œâ”€â”€ config.py          # é…ç½®ç®¡ç†æ¨¡å—ï¼ˆæ”¶è—ç®¡ç†ã€åœºæ™¯é…ç½®ç®¡ç†ï¼‰
â”‚   â”œâ”€â”€ contrast.py        # å¯¹æ¯”åº¦æ£€æŸ¥æ¨¡å—ï¼ˆWCAGå¯¹æ¯”åº¦è®¡ç®—ã€ç­‰çº§åˆ¤æ–­ï¼‰
â”‚   â””â”€â”€ svg_color_mapper.py # SVGæ™ºèƒ½é…è‰²æ˜ å°„æ¨¡å—ï¼ˆSVGè§£æã€å…ƒç´ åˆ†ç±»ã€æ™ºèƒ½é…è‰²æ˜ å°„ï¼‰
â”œâ”€â”€ preview_scenes/        # åœºæ™¯é…ç½®ç›®å½•ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ scenes.json        # å†…ç½®åœºæ™¯é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ user_scenes/       # ç”¨æˆ·è‡ªå®šä¹‰åœºæ™¯ç›®å½•
â”œâ”€â”€ ui/                     # UIæ¨¡å—ç›®å½•ï¼ˆæ‰å¹³åŒ–ç»“æ„ï¼‰
â”‚   â”œâ”€â”€ __init__.py        # ç»Ÿä¸€å¯¼å‡ºæ¥å£
â”‚   â”œâ”€â”€ main_window.py     # ä¸»çª—å£ç±»
â”‚   â”œâ”€â”€ canvases.py        # ç”»å¸ƒæ¨¡å—ï¼ˆBaseCanvasã€ImageCanvasã€LuminanceCanvasï¼‰
â”‚   â”œâ”€â”€ cards.py           # å¡ç‰‡ç»„ä»¶æ¨¡å—ï¼ˆColorCardã€LuminanceCardåŠåŸºç±»ï¼‰
â”‚   â”œâ”€â”€ histograms.py      # ç›´æ–¹å›¾ç»„ä»¶æ¨¡å—
â”‚   â”œâ”€â”€ color_picker.py    # é¢œè‰²é€‰æ‹©å™¨æ¨¡å—
â”‚   â”œâ”€â”€ color_wheel.py     # é¢œè‰²è½®æ¨¡å—ï¼ˆHSBColorWheelã€InteractiveColorWheelï¼‰
â”‚   â”œâ”€â”€ generation_widgets.py  # é…è‰²ç”Ÿæˆç»„ä»¶æ¨¡å—ï¼ˆGenerationColorInfoCardã€GenerationColorPanelï¼‰
â”‚   â”œâ”€â”€ palette_management_widgets.py # é…è‰²ç®¡ç†ç»„ä»¶æ¨¡å—ï¼ˆPaletteManagementColorCardã€PaletteManagementCardã€PaletteManagementListï¼‰
â”‚   â”œâ”€â”€ preset_color_widgets.py # å†…ç½®è‰²å½©ç»„ä»¶æ¨¡å—ï¼ˆPresetColorCardã€PresetColorSchemeCardã€PresetColorListï¼‰
â”‚   â”œâ”€â”€ preview_widgets.py # é…è‰²é¢„è§ˆç»„ä»¶æ¨¡å—ï¼ˆDraggableColorDotã€ColorDotBarã€BasePreviewSceneã€PreviewSceneFactoryã€ConfigurablePreviewSceneã€SceneRendererã€IllustrationPreviewã€TypographyPreviewã€SVGPreviewWidgetã€PreviewSceneSelectorã€PreviewToolbarã€MixedPreviewPanelï¼‰
â”‚   â”œâ”€â”€ zoom_viewer.py     # ç¼©æ”¾æŸ¥çœ‹å™¨æ¨¡å—
â”‚   â”œâ”€â”€ interfaces.py      # ç•Œé¢é¢æ¿æ¨¡å—ï¼ˆColorExtractInterfaceã€LuminanceExtractInterfaceã€SettingsInterfaceã€ColorSchemeInterfaceã€ColorManagementInterfaceã€PresetColorInterfaceã€ColorPreviewInterfaceï¼‰
â”‚   â””â”€â”€ theme_colors.py    # ä¸»é¢˜é¢œè‰²ç®¡ç†æ¨¡å—ï¼ˆç»Ÿä¸€é¢œè‰²ç®¡ç†ã€ä¸»é¢˜æ„ŸçŸ¥é¢œè‰²è·å–ï¼‰
â”œâ”€â”€ dialogs/               # å¯¹è¯æ¡†æ¨¡å—ç›®å½•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ about_dialog.py    # å…³äºå¯¹è¯æ¡†
â”‚   â”œâ”€â”€ colorblind_dialog.py # è‰²ç›²æ¨¡æ‹Ÿé¢„è§ˆå¯¹è¯æ¡†
â”‚   â”œâ”€â”€ contrast_dialog.py # å¯¹æ¯”åº¦æ£€æŸ¥å¯¹è¯æ¡†
â”‚   â”œâ”€â”€ edit_palette.py    # ç¼–è¾‘é…è‰²å¯¹è¯æ¡†ï¼ˆæ·»åŠ /ç¼–è¾‘é…è‰²ï¼‰
â”‚   â””â”€â”€ update_dialog.py   # æ›´æ–°æ£€æŸ¥å¯¹è¯æ¡†
â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°æ¨¡å—ç›®å½•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ icon.py            # å›¾æ ‡å·¥å…·æ¨¡å—
â”‚   â””â”€â”€ platform.py        # å¹³å°ç›¸å…³å·¥å…·æ¨¡å—
â””â”€â”€ color_data/            # é¢œè‰²æ•°æ®ç›®å½•ï¼ˆJSONæ ¼å¼ï¼‰
    â”œâ”€â”€ open_color.json    # Open Color é¢œè‰²åº“
    â”œâ”€â”€ tailwind_colors.json # Tailwind CSS é¢œè‰²åº“
    â”œâ”€â”€ material_design.json # Material Design é¢œè‰²åº“
    â”œâ”€â”€ nord.json          # Nord é¢œè‰²åº“
    â”œâ”€â”€ dracula.json       # Dracula é¢œè‰²åº“
    â”œâ”€â”€ colorbrewer.json   # ColorBrewer é¢œè‰²åº“
    â”œâ”€â”€ radix_colors.json  # Radix Colors é¢œè‰²åº“
    â”œâ”€â”€ nice_palettes.json # Nice Color Palettes é…è‰²æ–¹æ¡ˆ
    â”œâ”€â”€ rose_pine.json     # RosÃ© Pine é¢œè‰²åº“
    â”œâ”€â”€ solarized.json     # Solarized é¢œè‰²åº“
    â”œâ”€â”€ catppuccin.json    # Catppuccin é¢œè‰²åº“
    â”œâ”€â”€ gruvbox.json       # Gruvbox é¢œè‰²åº“
    â””â”€â”€ tokyo_night.json   # Tokyo Night é¢œè‰²åº“
```


---

## 2. ä»£ç ç»„ç»‡è§„èŒƒ

### 2.1 æ–‡ä»¶å‘½åè§„èŒƒ

- é‡‡ç”¨å°å†™å­—æ¯å’Œä¸‹åˆ’çº¿å‘½åï¼Œå¦‚ `color_utils.py`
- æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ä½¿ç”¨æ¸…æ™°çš„æè¿°æ€§åç§°
- åˆå¹¶åçš„æ¨¡å—ä½¿ç”¨å¤æ•°å½¢å¼å‘½åï¼Œå¦‚ `cards.py`ã€`histograms.py`ã€`canvases.py`

### 2.2 æ¨¡å—åˆ’åˆ†

|æ¨¡å—ç±»å‹ |èŒè´£ |ç¤ºä¾‹æ–‡ä»¶ |
|:---:|:---:|:---:|
|å…¥å£æ¨¡å— |åº”ç”¨ç¨‹åºå…¥å£ |`main.py` |
|æ ¸å¿ƒæ¨¡å— |é¢œè‰²å¤„ç†ã€é…ç½®ç®¡ç† |`core/color.py`, `core/config.py` |
|UI æ¨¡å— |ç•Œé¢ç»„ä»¶å’Œé¢æ¿ |`ui/canvases.py`, `ui/cards.py` |
|å¯¹è¯æ¡†æ¨¡å— |å¼¹å‡ºå¯¹è¯æ¡† |`dialogs/about_dialog.py` |
|å·¥å…·æ¨¡å— |é€šç”¨åŠŸèƒ½ |`utils/icon.py`, `utils/platform.py` |

### 2.3 ç›®å½•ç»“æ„åŸåˆ™

**æ‰å¹³åŒ–ç»“æ„ï¼ˆ2çº§ç›®å½•ï¼‰ï¼š**

```
color_card/           â† ç¬¬1çº§
â”œâ”€â”€ core/            â† ç¬¬2çº§
â”œâ”€â”€ ui/              â† ç¬¬2çº§ï¼ˆæ‰å¹³åŒ–ï¼Œç›´æ¥åŒ…å«æ‰€æœ‰UIæ–‡ä»¶ï¼‰
â”œâ”€â”€ dialogs/         â† ç¬¬2çº§
â””â”€â”€ utils/           â† ç¬¬2çº§
```

**è®¾è®¡åŸåˆ™ï¼š**

- é¿å…è¿‡åº¦åµŒå¥—ï¼ˆä¸è¶…è¿‡2çº§ç›®å½•ï¼‰
- å°†ç´§å¯†ç›¸å…³çš„ç±»åˆå¹¶åˆ°åŒä¸€æ–‡ä»¶ï¼Œå‡å°‘æ–‡ä»¶æ•°é‡
- ä¿æŒåŠŸèƒ½æ¨¡å—åŒ–ï¼ŒèŒè´£æ˜ç¡®

### 2.4 å¯¼å…¥è§„èŒƒ

**å¯¼å…¥é¡ºåºï¼š** æ ‡å‡†åº“ â†’ ç¬¬ä¸‰æ–¹åº“ â†’ é¡¹ç›®æ¨¡å—

**è§„èŒƒè¦æ±‚ï¼š**

- æŒ‰æ¨¡å—ç±»å‹åˆ†ç»„å¯¼å…¥ï¼Œæ·»åŠ æ¸…æ™°çš„åˆ†ç»„æ³¨é‡Š
- å®šæœŸæ¸…ç†æœªä½¿ç”¨çš„å¯¼å…¥
- åˆå¹¶åŒä¸€æ¨¡å—çš„å¤šæ¬¡å¯¼å…¥
- ä¼˜å…ˆä½¿ç”¨ç»å¯¹å¯¼å…¥

```python
# æ ‡å‡†åº“å¯¼å…¥
import sys
import math
from pathlib import Path

# ç¬¬ä¸‰æ–¹åº“å¯¼å…¥
from PySide6.QtWidgets import QApplication, QMainWindow
from PySide6.QtCore import Qt, Signal
from qfluentwidgets import FluentWindow

# é¡¹ç›®æ¨¡å—å¯¼å…¥
from core import get_color_info, get_config_manager
from ui import MainWindow
```

**å¯¼å…¥æ¸…ç†ç¤ºä¾‹ï¼š**

```python
# ä¿®æ”¹å‰
from styles import UnifiedStyleHelper
from styles import get_global_font_manager

# ä¿®æ”¹å
from styles import UnifiedStyleHelper, get_global_font_manager
```


---

## 3. ä»£ç ç¼–å†™è§„èŒƒ

### 3.1 åŸºæœ¬è§„èŒƒ

- éµå¾ª **PEP 8** ä»£ç é£æ ¼è§„èŒƒ
- ä½¿ç”¨ 4 ä¸ªç©ºæ ¼ç¼©è¿›
- è¡Œé•¿åº¦é™åˆ¶åœ¨ 100 å­—ç¬¦ä»¥å†…
- ä¿æŒä»£ç ç®€æ´ï¼Œåˆ é™¤æ— ç”¨çš„è°ƒè¯•ä»£ç å’Œä¸´æ—¶æµ‹è¯•ä»£ç 

### 3.2 ä»£ç æ¸…ç†åŸåˆ™

**ä¿®æ”¹ä»£ç æ—¶åº”åŒæ­¥è¿›è¡Œä»¥ä¸‹æ¸…ç†ï¼š**

- åˆ é™¤æœªä½¿ç”¨çš„å˜é‡ã€å‡½æ•°ã€å¯¼å…¥å’Œæ³¨é‡Š
- åˆå¹¶é‡å¤çš„é€»è¾‘å’Œç›¸ä¼¼çš„åŠŸèƒ½
- æ£€æŸ¥å¹¶æ¸…é™¤ç›¸å…³çš„é‡å¤å†—ä½™ä»£ç 
- ä¿æŒä»£ç æ•´æ´ï¼Œæé«˜ä»£ç å¤ç”¨æ€§

**æ¸…ç†ç¤ºä¾‹ï¼š**

```python
# ä¿®æ”¹å‰
import json
import re

def calculate():
    temp = 0  # æœªä½¿ç”¨çš„å˜é‡
    return result

# ä¿®æ”¹åï¼ˆåˆ é™¤æœªä½¿ç”¨çš„å¯¼å…¥å’Œå˜é‡ï¼‰
def calculate():
    return result
```

### 3.3 å‘½åè§„èŒƒ

**è¯¦ç»†è§„èŒƒè¯·å‚é˜…** 

|ç±»å‹ |è§„èŒƒ |ç¤ºä¾‹ |
|:---:|:---:|:---:|
|ç±»å |é©¼å³°å‘½åæ³• |`ColorPicker`, `ImageCanvas` |
|å‡½æ•°/æ–¹æ³• |å°å†™+ä¸‹åˆ’çº¿ |`extract_color()` |
|å˜é‡ |å°å†™+ä¸‹åˆ’çº¿ |`picker_positions` |
|å¸¸é‡ |å¤§å†™+ä¸‹åˆ’çº¿ |`PICKER_RADIUS = 12` |
|ç§æœ‰å±æ€§ |å•ä¸‹åˆ’çº¿å‰ç¼€ |`_dragging` |
|ä¿¡å· |å°å†™+ä¸‹åˆ’çº¿ |`color_picked = Signal(int, tuple)` |

### 3.4 å¼‚å¸¸å¤„ç†è§„èŒƒ

**åŸºæœ¬åŸåˆ™ï¼š**

- é¿å…ä½¿ç”¨è£¸ `except:` æˆ– `except Exception:`
- åº”æŒ‡å®šå…·ä½“å¼‚å¸¸ç±»å‹
- æä¾›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºè°ƒè¯•

**ç¤ºä¾‹ï¼š**

```python
# é”™è¯¯ç¤ºä¾‹
except Exception:
    pass

# æ­£ç¡®ç¤ºä¾‹
except (OSError, ValueError) as e:
    error_msg = f"æ–‡ä»¶è¯»å–å¤±è´¥: {str(e)}"
    print(error_msg)
```

### 3.5 æ–‡æ¡£å­—ç¬¦ä¸²è§„èŒƒ

**åŸºæœ¬åŸåˆ™ï¼š**

- æ‰€æœ‰å…¬å…±ç±»å’Œæ–¹æ³•å¿…é¡»æ·»åŠ æ–‡æ¡£å­—ç¬¦ä¸²
- ä½¿ç”¨ç®€æ´çš„ä¸­æ–‡æè¿°ï¼Œé¿å…å†—ä½™
- ç±»æ–‡æ¡£å­—ç¬¦ä¸²ä¿æŒç®€æ´ï¼ˆå•è¡Œæˆ–ç®€çŸ­æ®µè½ï¼‰
- æ–¹æ³•æ–‡æ¡£å­—ç¬¦ä¸²åŒ…å« Argsã€Returns è¯´æ˜

**ç²¾ç®€ç¤ºä¾‹ï¼š**

```python
# ç±»æ–‡æ¡£å­—ç¬¦ä¸²ï¼ˆç®€æ´ï¼‰
class ImageCanvas(QWidget):
    """å›¾ç‰‡æ˜¾ç¤ºç”»å¸ƒï¼Œæ”¯æŒå–è‰²ç‚¹æ‹–åŠ¨"""
    pass

# æ–¹æ³•æ–‡æ¡£å­—ç¬¦ä¸²ï¼ˆå®Œæ•´ä½†ç®€æ´ï¼‰
def set_image(self, image_path):
    """åŠ è½½å¹¶æ˜¾ç¤ºå›¾ç‰‡
    
    Args:
        image_path: å›¾ç‰‡æ–‡ä»¶çš„å®Œæ•´è·¯å¾„
    """
    pass

# å¸¦è¿”å›å€¼çš„æ–‡æ¡£å­—ç¬¦ä¸²
def get_color_info(self, r, g, b):
    """è·å–é¢œè‰²ä¿¡æ¯
    
    Args:
        r: çº¢è‰²é€šé“å€¼ (0-255)
        g: ç»¿è‰²é€šé“å€¼ (0-255)
        b: è“è‰²é€šé“å€¼ (0-255)
    
    Returns:
        dict: åŒ…å«RGBã€HSBã€LABã€HEXé¢œè‰²ä¿¡æ¯çš„å­—å…¸
    """
    pass
```

### 3.6 ä¿¡å·å‘½åè§„èŒƒ

- ä¿¡å·åä½¿ç”¨å°å†™+ä¸‹åˆ’çº¿
- æ·»åŠ æ³¨é‡Šè¯´æ˜ä¿¡å·å‚æ•°

```python
class ImageCanvas(QWidget):
    color_picked = Signal(int, tuple)      # ä¿¡å·ï¼šç´¢å¼•, RGBé¢œè‰²
    image_loaded = Signal(str)              # ä¿¡å·ï¼šå›¾ç‰‡è·¯å¾„
    image_cleared = Signal()                # ä¿¡å·ï¼šå›¾ç‰‡å·²æ¸…ç©º
```

### 3.7 ä¸»é¢˜ä¸æ ·å¼è§„èŒƒ

#### 3.7.1 ä¸»é¢˜åˆ‡æ¢å®ç°è§„èŒƒ

**ä½¿ç”¨ qfluentwidgets çš„ä¸»é¢˜ç³»ç»Ÿï¼š**

- ä½¿ç”¨ `setTheme(Theme.LIGHT/DARK)` åˆ‡æ¢ä¸»é¢˜
- ä½¿ç”¨ `isDarkTheme()` æ£€æµ‹å½“å‰ä¸»é¢˜
- ä½¿ç”¨ `qconfig.themeChangedFinished` ä¿¡å·ç›‘å¬ä¸»é¢˜å˜åŒ–

**ç¤ºä¾‹ä»£ç ï¼š**

```python
from qfluentwidgets import setTheme, Theme, isDarkTheme, qconfig

# åˆ‡æ¢ä¸»é¢˜
def toggle_theme():
    if isDarkTheme():
        setTheme(Theme.LIGHT)
    else:
        setTheme(Theme.DARK)

# ç›‘å¬ä¸»é¢˜å˜åŒ–
qconfig.themeChangedFinished.connect(self._update_styles)
```

#### 3.7.2 é¢œè‰²ç®¡ç†è§„èŒƒ

**é›†ä¸­ç®¡ç†é¢œè‰²å€¼ï¼š**

- æ‰€æœ‰é¢œè‰²å€¼åº”å®šä¹‰åœ¨ `theme_colors.py` ä¸­
- ä½¿ç”¨å‡½æ•°è¿”å› QColorï¼Œæ”¯æŒä¸»é¢˜æ„ŸçŸ¥
- é¿å…åœ¨ç»„ä»¶ä¸­ç¡¬ç¼–ç é¢œè‰²å€¼

**é¢œè‰²å‡½æ•°å‘½åè§„èŒƒï¼š**

```python
# èƒŒæ™¯é¢œè‰²

def get_card_background_color():
    return QColor(42, 42, 42) if isDarkTheme() else QColor(255, 255, 255)

# æ–‡æœ¬é¢œè‰²

def get_text_color(secondary=False):
    if isDarkTheme():
        return QColor(160, 160, 160) if secondary else QColor(255, 255, 255)
    else:
        return QColor(120, 120, 120) if secondary else QColor(40, 40, 40)
```

#### 3.7.3 ä¸»é¢˜è‡ªé€‚åº”ç»„ä»¶å®ç°

**å¿…é¡»å®ç°** `_update_styles()` æ–¹æ³•ï¼š

- åœ¨ `__init__` ä¸­è°ƒç”¨ `_update_styles()` åˆå§‹åŒ–æ ·å¼
- è¿æ¥ `qconfig.themeChangedFinished` ä¿¡å·
- æ ¹æ® `isDarkTheme()` è¿”å›ä¸åŒé¢œè‰²å€¼

**ç¤ºä¾‹ï¼š**

```python
class MyWidget(QWidget):
    def __init__(self, parent=None):
        super().__init__(parent)
        self.setup_ui()
        self._update_styles()
        qconfig.themeChangedFinished.connect(self._update_styles)

    def _update_styles(self):
        """æ›´æ–°æ ·å¼ä»¥é€‚é…ä¸»é¢˜"""
        if isDarkTheme():
            label_color = "#ffffff"
            value_color = "#ffffff"
        else:
            label_color = "#333333"
            value_color = "#333333"

        self.label.setStyleSheet(f"color: {label_color};")
```

#### 3.7.4 æ ·å¼è¡¨ä½¿ç”¨è§„èŒƒ

**é¿å…ä½¿ç”¨** `!important`ï¼š

- ä¼˜å…ˆä½¿ç”¨ç»„ä»¶ç‰¹å®šçš„é€‰æ‹©å™¨
- å¦‚å¿…é¡»ä½¿ç”¨ï¼Œç¡®ä¿åœ¨ä¸»é¢˜åˆ‡æ¢åé‡æ–°åº”ç”¨

**è‡ªå®šä¹‰æ ‡é¢˜æ æŒ‰é’®æ ·å¼ï¼š**

```python
# åœ¨ä¸»é¢˜åˆ‡æ¢åé‡æ–°åº”ç”¨æ ·å¼

def _toggle_theme(self):
    if isDarkTheme():
        setTheme(Theme.LIGHT)
    else:
        setTheme(Theme.DARK)
    # é‡æ–°åº”ç”¨è‡ªå®šä¹‰æ ·å¼
    self._apply_custom_style()
```

#### 3.7.5 Windows åŸç”Ÿæ ‡é¢˜æ æ·±è‰²æ¨¡å¼

**ä½¿ç”¨ Windows DWM API è®¾ç½®åŸç”Ÿæ ‡é¢˜æ ä¸»é¢˜ï¼š**

å¯¹äºç»§æ‰¿è‡ª `QDialog` çš„å¯¹è¯æ¡†ï¼Œä½¿ç”¨ Windows DWM (Desktop Window Manager) API è®¾ç½®åŸç”Ÿæ ‡é¢˜æ çš„æ²‰æµ¸å¼æ·±è‰²æ¨¡å¼ã€‚

**å®ç°æ­¥éª¤ï¼š**


1. **åˆ›å»ºå·¥å…·å‡½æ•°**ï¼ˆæ”¾åœ¨ `utils/platform.py`ï¼‰ï¼š

```python
import ctypes
import sys

DWMWA_USE_IMMERSIVE_DARK_MODE = 20

def set_window_title_bar_theme(window, is_dark=False):
    """ä¸ºçª—å£è®¾ç½®æ ‡é¢˜æ ä¸»é¢˜ï¼ˆWindows 10+ï¼‰"""
    try:
        if sys.platform != "win32":
            return False
        
        window_handle = window.windowHandle()
        if not window_handle:
            return False
        
        hwnd = int(window_handle.winId())
        value = ctypes.c_int(1 if is_dark else 0)
        
        result = ctypes.windll.dwmapi.DwmSetWindowAttribute(
            hwnd,
            DWMWA_USE_IMMERSIVE_DARK_MODE,
            ctypes.byref(value),
            ctypes.sizeof(value)
        )
        return result == 0
    except Exception:
        return False
```


2. **åœ¨å¯¹è¯æ¡†ä¸­åº”ç”¨**ï¼ˆä½¿ç”¨ `showEvent` é¿å…é—ªçƒï¼‰ï¼š

```python
from qfluentwidgets import isDarkTheme, qconfig
from utils import set_window_title_bar_theme

class MyDialog(QDialog):
    def __init__(self, parent=None):
        super().__init__(parent)
        # ... å…¶ä»–åˆå§‹åŒ–ä»£ç  ...
        
        # ç›‘å¬ä¸»é¢˜å˜åŒ–ï¼ˆç”¨äºæ›´æ–°å·²æ‰“å¼€çš„å¯¹è¯æ¡†ï¼‰
        qconfig.themeChangedFinished.connect(self._update_title_bar_theme)
    
    def showEvent(self, event):
        """çª—å£æ˜¾ç¤ºå‰è®¾ç½®æ ‡é¢˜æ ä¸»é¢˜ï¼Œé¿å…é—ªçƒ"""
        self._update_title_bar_theme()
        super().showEvent(event)
    
    def _update_title_bar_theme(self):
        """æ›´æ–°æ ‡é¢˜æ ä¸»é¢˜"""
        set_window_title_bar_theme(self, isDarkTheme())
```

**å…³é”®è¦ç‚¹ï¼š**

- ä½¿ç”¨ `showEvent` åœ¨çª—å£æ˜¾ç¤ºå‰è®¾ç½®æ ‡é¢˜æ ä¸»é¢˜ï¼Œé¿å…é—ªçƒ
- è¿æ¥ `qconfig.themeChangedFinished` ä¿¡å·ï¼Œæ”¯æŒå·²æ‰“å¼€å¯¹è¯æ¡†çš„ä¸»é¢˜åˆ‡æ¢
- ä»…æ”¯æŒ Windows 10 ç‰ˆæœ¬ 2004 (Build 19041) åŠä»¥ä¸Šï¼ŒWindows 11 å®Œå…¨æ”¯æŒ
- é Windows å¹³å°é™é»˜è·³è¿‡ï¼Œä¸å½±å“ç¨‹åºè¿è¡Œ


---

## 4. åŸºç±»è®¾è®¡è§„èŒƒ

### 4.1 ç”»å¸ƒåŸºç±» (BaseCanvas)

**æ–‡ä»¶ä½ç½®ï¼š** `ui/canvases.py`

**èŒè´£ï¼š**

- æä¾›å›¾ç‰‡åŠ è½½ã€æ˜¾ç¤ºçš„åŸºç¡€åŠŸèƒ½
- å®ç°åæ ‡è½¬æ¢ï¼ˆç”»å¸ƒåæ ‡ â†” å›¾ç‰‡åæ ‡ï¼‰
- ç®¡ç†å›¾ç‰‡ç›¸å¯¹åæ ‡ç³»ç»Ÿ
- æä¾›å³é”®èœå•æ¡†æ¶

**å­ç±»å¿…é¡»å®ç°çš„æ–¹æ³•ï¼š**

```python
def _on_image_loaded(self):
    """å›¾ç‰‡åŠ è½½åçš„å¤„ç†ï¼ˆå­ç±»é‡å†™ï¼‰"""
    pass

def _on_image_cleared(self):
    """å›¾ç‰‡æ¸…ç©ºåçš„å¤„ç†ï¼ˆå­ç±»é‡å†™ï¼‰"""
    pass

def _draw_overlay(self, painter: QPainter):
    """ç»˜åˆ¶å åŠ å†…å®¹ï¼ˆå­ç±»å¿…é¡»å®ç°ï¼‰"""
    raise NotImplementedError("å­ç±»å¿…é¡»å®ç° _draw_overlay æ–¹æ³•")
```

### 4.2 å¡ç‰‡åŸºç±» (BaseCard / BaseCardPanel)

**æ–‡ä»¶ä½ç½®ï¼š** `ui/cards.py`

**èŒè´£ï¼š**

- æä¾›ç»Ÿä¸€çš„å¡ç‰‡æ¥å£
- ç®¡ç†å¡ç‰‡åˆ—è¡¨ï¼ˆBaseCardPanelï¼‰
- æ”¯æŒæ‰¹é‡æ¸…ç©ºå¡ç‰‡

**è®¾è®¡åŸåˆ™ï¼š**

- ä¿æŒæ¥å£ç®€æ´ï¼ˆsetup_ui, clearï¼‰
- çµæ´»çš„å¡ç‰‡åˆ›å»ºæ–¹æ³•
- æ¸…æ™°çš„èŒè´£åˆ†ç¦»

### 4.3 ç›´æ–¹å›¾åŸºç±» (BaseHistogram)

**æ–‡ä»¶ä½ç½®ï¼š** `ui/histograms.py`

**èŒè´£ï¼š**

- æä¾›é€šç”¨çš„æ•°æ®ç®¡ç†ï¼ˆset_data, clearï¼‰
- æä¾›é€šç”¨çš„ç»˜åˆ¶æ¡†æ¶ï¼ˆpaintEventï¼‰
- å®šä¹‰æŠ½è±¡æ–¹æ³•æ¥å£

**å­ç±»å¿…é¡»å®ç°çš„æ–¹æ³•ï¼š**

```python
def _draw_histogram(self, painter: QPainter):
    """ç»˜åˆ¶ç›´æ–¹å›¾ï¼ˆå­ç±»å¿…é¡»å®ç°ï¼‰"""
    raise NotImplementedError("å­ç±»å¿…é¡»å®ç° _draw_histogram æ–¹æ³•")

def _draw_custom_overlay(self, painter: QPainter):
    """ç»˜åˆ¶è‡ªå®šä¹‰å åŠ å†…å®¹ï¼ˆå­ç±»é‡å†™ï¼‰"""
    pass

def _draw_labels(self, painter: QPainter):
    """ç»˜åˆ¶æ ‡ç­¾ï¼ˆå­ç±»é‡å†™ï¼‰"""
    pass
```

### 4.4 åŸºç±»è®¾è®¡åŸåˆ™


1. **å•ä¸€èŒè´£**ï¼šæ¯ä¸ªåŸºç±»åªè´Ÿè´£ä¸€ç±»åŠŸèƒ½
2. **æ¥å£æ¸…æ™°**ï¼šæŠ½è±¡æ–¹æ³•æ˜ç¡®ï¼Œå­ç±»èŒè´£æ¸…æ™°
3. **å¯æ‰©å±•æ€§**ï¼šä¾¿äºæ·»åŠ æ–°çš„å­ç±»å®ç°
4. **ä»£ç å¤ç”¨**ï¼šæå–å…¬å…±é€»è¾‘ï¼Œæ¶ˆé™¤é‡å¤ä»£ç 


---

## 5. PySide6 å¼€å‘è§„èŒƒ

### 5.1 Fluent Widgets ä½¿ç”¨è§„èŒƒ

- ä¸»çª—å£ç»§æ‰¿ `FluentWindow`
- ä½¿ç”¨ `setTheme()` è®¾ç½®ä¸»é¢˜
- ä½¿ç”¨ `setThemeColor()` è®¾ç½®ä¸»é¢˜è‰²

```python
from qfluentwidgets import FluentWindow, setTheme, Theme, FluentIcon

setTheme(Theme.AUTO)
setThemeColor('#0078d4')

class MainWindow(FluentWindow):
    def setup_navigation(self):
        self.addSubInterface(
            self.interface,
            FluentIcon.PALETTE,
            "ç•Œé¢åç§°"
        )
```

### 5.2 ç•Œé¢ç»„ç»‡è§„èŒƒ

- æ¯ä¸ªåŠŸèƒ½æ¨¡å—åˆ›å»ºç‹¬ç«‹çš„ `QWidget` å­ç±»
- ç•Œé¢ç±»ä½¿ç”¨ `setObjectName()` è®¾ç½®å”¯ä¸€æ ‡è¯†

```python
class ColorExtractInterface(QWidget):
    def __init__(self, parent=None):
        super().__init__(parent)
        self.setObjectName('colorExtractInterface')
        self.setup_ui()
        self.setup_connections()
```

### 5.3 ä¿¡å·ä¸æ§½

- ä¿¡å·è¿æ¥åº”åœ¨åˆå§‹åŒ–æ—¶å®Œæˆ
- æ§½å‡½æ•°å‘½åä½¿ç”¨ `on_` å‰ç¼€
- **é˜²æ­¢åŒå‘åŒæ­¥å¾ªç¯**ï¼šå½“ä¸¤ä¸ªé¢æ¿éœ€è¦ç›¸äº’åŒæ­¥æ•°æ®æ—¶ï¼Œä½¿ç”¨æ ‡å¿—ä½æˆ–å‚æ•°æ§åˆ¶ä¿¡å·å‘å°„ï¼Œé¿å…æ— é™å¾ªç¯

```python
# ä¿¡å·è¿æ¥
self.image_canvas.color_picked.connect(self.on_color_picked)

# æ§½å‡½æ•°å®ç°
def on_color_picked(self, index, rgb):
    """é¢œè‰²æå–å›è°ƒ"""
    pass

# é˜²æ­¢åŒå‘åŒæ­¥å¾ªç¯çš„ç¤ºä¾‹
def set_image_data(self, pixmap, image, emit_sync=True):
    """è®¾ç½®å›¾ç‰‡æ•°æ®
    
    Args:
        pixmap: QPixmap å¯¹è±¡
        image: QImage å¯¹è±¡
        emit_sync: æ˜¯å¦å‘å°„åŒæ­¥ä¿¡å·ï¼ˆé»˜è®¤Trueï¼Œä»å…¶ä»–é¢æ¿åŒæ­¥æ—¶è®¾ä¸ºFalseï¼‰
    """
    self._original_pixmap = pixmap
    self._image = image
    
    # åªåœ¨ç‹¬ç«‹å¯¼å…¥æ—¶å‘å°„åŒæ­¥ä¿¡å·ï¼Œé˜²æ­¢åŒå‘å¾ªç¯
    if emit_sync:
        self.image_loaded.emit(file_path)
        self.image_data_loaded.emit(pixmap, image)

# ä»å…¶ä»–é¢æ¿åŒæ­¥æ—¶ç¦ç”¨ä¿¡å·å‘å°„
# é¢æ¿Aå¯¼å…¥å›¾ç‰‡ â†’ åŒæ­¥åˆ°é¢æ¿Bï¼ˆemit_sync=Falseï¼‰
# é¢æ¿Bä¸ä¼šå‘å°„ä¿¡å·å›åˆ°é¢æ¿Aï¼Œæ‰“ç ´å¾ªç¯
```

### 5.4 è‡ªå®šä¹‰æ§ä»¶è§„èŒƒ

- ç»§æ‰¿è‡ªåˆé€‚çš„ QWidget å­ç±»
- é‡å†™ `paintEvent` å®ç°è‡ªå®šä¹‰ç»˜åˆ¶

```python
class ColorPicker(QWidget):
    """å¯æ‹–åŠ¨çš„åœ†å½¢å–è‰²ç‚¹"""
    
    def paintEvent(self, event):
        painter = QPainter(self)
        painter.setRenderHint(QPainter.RenderHint.Antialiasing)
        # ç»˜åˆ¶ä»£ç ...
```

### 5.5 æ ·å¼è®¾ç½®è§„èŒƒ

#### 5.5.1 é¢œè‰²ç®¡ç†è§„èŒƒ

**æ ¸å¿ƒåŸåˆ™ï¼šç¦æ­¢åœ¨ç»„ä»¶ä¸­ç›´æ¥ä½¿ç”¨ç¡¬ç¼–ç é¢œè‰²å€¼**

æ‰€æœ‰é¢œè‰²å¿…é¡»é€šè¿‡ `ui/theme_colors.py` æ¨¡å—ç»Ÿä¸€ç®¡ç†ï¼š

```python
# æ­£ç¡®ç”¨æ³• - ä»ä¸»é¢˜é¢œè‰²æ¨¡å—å¯¼å…¥
from ui.theme_colors import get_text_color, get_canvas_background_color

# è·å–ä¸»é¢˜æ„ŸçŸ¥çš„æ–‡æœ¬é¢œè‰²
text_color = get_text_color()

# è·å–å›ºå®šé¢œè‰²ï¼ˆå¦‚å›¾ç‰‡æ˜¾ç¤ºå™¨èƒŒæ™¯ï¼‰
bg_color = get_canvas_background_color()  # å›ºå®šç°é»‘è‰² #2a2a2a
```

**ç¦æ­¢çš„åšæ³•ï¼š**

```python
# é”™è¯¯ - ç¡¬ç¼–ç é¢œè‰²å€¼
painter.setPen(QColor(255, 255, 255))
widget.setStyleSheet("background-color: #2a2a2a;")
```

#### 5.5.2 ä¸»é¢˜é¢œè‰²æ¨¡å— (ui/theme_colors.py)

**è®¾è®¡åŸåˆ™ï¼š**

- **é›†ä¸­ç®¡ç†**ï¼šæ‰€æœ‰é¢œè‰²å€¼é›†ä¸­åœ¨ theme_colors.py ä¸­å®šä¹‰
- **ä¸»é¢˜æ„ŸçŸ¥**ï¼šé¢œè‰²å‡½æ•°æ ¹æ®å½“å‰ä¸»é¢˜ï¼ˆæ·±è‰²/æµ…è‰²ï¼‰è‡ªåŠ¨è¿”å›å¯¹åº”é¢œè‰²
- **åˆ†ç±»æ¸…æ™°**ï¼šæŒ‰ç”¨é€”åˆ†ç±»ï¼ˆèƒŒæ™¯è‰²ã€æ–‡æœ¬è‰²ã€è¾¹æ¡†è‰²ã€æ§ä»¶é¢œè‰²ç­‰ï¼‰

**é¢œè‰²åˆ†ç±»ï¼š**

|åˆ†ç±» |å‡½æ•°ç¤ºä¾‹ |è¯´æ˜ |
|:---:|:---|:---|
|èƒŒæ™¯è‰² |`get_canvas_background_color()` |å›¾ç‰‡æ˜¾ç¤ºå™¨èƒŒæ™¯ï¼ˆå›ºå®š #2a2a2aï¼‰ |
|èƒŒæ™¯è‰² |`get_card_background_color()` |å¡ç‰‡èƒŒæ™¯ï¼ˆä¸»é¢˜æ„ŸçŸ¥ï¼‰ |
|èƒŒæ™¯è‰² |`get_histogram_background_color()` |ç›´æ–¹å›¾èƒŒæ™¯ï¼ˆå›ºå®š #2a2a2aï¼‰ |
|æ–‡æœ¬è‰² |`get_text_color()` |ä¸»æ–‡æœ¬é¢œè‰²ï¼ˆä¸»é¢˜æ„ŸçŸ¥ï¼‰ |
|æ–‡æœ¬è‰² |`get_secondary_text_color()` |æ¬¡è¦æ–‡æœ¬é¢œè‰²ï¼ˆä¸»é¢˜æ„ŸçŸ¥ï¼‰ |
|æ–‡æœ¬è‰² |`get_title_color()` |æ ‡é¢˜é¢œè‰²ï¼ˆä¸»é¢˜æ„ŸçŸ¥ï¼‰ |
|è¾¹æ¡†è‰² |`get_border_color()` |è¾¹æ¡†é¢œè‰²ï¼ˆä¸»é¢˜æ„ŸçŸ¥ï¼‰ |
|æ§ä»¶è‰² |`get_picker_border_color()` |å–è‰²ç‚¹è¾¹æ¡†é¢œè‰² |
|æ§ä»¶è‰² |`get_picker_fill_color()` |å–è‰²ç‚¹å¡«å……é¢œè‰² |
|Zoneè‰² |`get_zone_background_color()` |Zoneæ¡†èƒŒæ™¯é¢œè‰² |
|Zoneè‰² |`get_zone_text_color()` |Zoneæ¡†æ–‡å­—é¢œè‰² |

**æ·»åŠ æ–°é¢œè‰²çš„æ­¥éª¤ï¼š**


1. åœ¨ `ui/theme_colors.py` ä¸­æ·»åŠ é¢œè‰²å‡½æ•°
2. æ ¹æ®ç”¨é€”é€‰æ‹©åˆé€‚çš„åˆ†ç±»
3. ç¡®å®šæ˜¯å›ºå®šé¢œè‰²è¿˜æ˜¯ä¸»é¢˜æ„ŸçŸ¥é¢œè‰²
4. åœ¨ç›¸å…³ç»„ä»¶ä¸­ä½¿ç”¨æ–°å‡½æ•°

#### 5.5.3 ä¸»é¢˜è®¾ç½®

- ä½¿ç”¨ `setTheme()` è®¾ç½®å…¨å±€ä¸»é¢˜
- ä½¿ç”¨ `isDarkTheme()` æ£€æµ‹å½“å‰ä¸»é¢˜
- ä½¿ç”¨ `setThemeColor()` è®¾ç½®ä¸»é¢˜è‰²

```python
from qfluentwidgets import FluentWindow, setTheme, Theme, FluentIcon, setThemeColor

setTheme(Theme.AUTO)
setThemeColor('#0078d4')

class MainWindow(FluentWindow):
    pass
```

#### 5.5.4 ç¦ç”¨QtåŸç”ŸåŠŸèƒ½è§„èŒƒ

**æ ¸å¿ƒåŸåˆ™ï¼šæ–°ç»„ä»¶åº”ç¦ç”¨ä¸ç¬¦åˆé¡¹ç›®éœ€æ±‚çš„QtåŸç”ŸåŠŸèƒ½**

Qtæ§ä»¶é»˜è®¤æä¾›çš„æŸäº›åŠŸèƒ½å¯èƒ½ä¸é¡¹ç›®è®¾è®¡ä¸ç¬¦ï¼Œåº”åœ¨åˆ›å»ºç»„ä»¶æ—¶ä¸»åŠ¨ç¦ç”¨ã€‚

**éœ€è¦ç¦ç”¨çš„å¸¸è§åŸç”ŸåŠŸèƒ½ï¼š**

|åŠŸèƒ½ |ç¦ç”¨æ–¹æ³• |é€‚ç”¨åœºæ™¯ |
|:---:|:---|:---|
|å³é”®ä¸Šä¸‹æ–‡èœå• |`setContextMenuPolicy(Qt.ContextMenuPolicy.NoContextMenu)` |è¾“å…¥æ¡†ã€æ ‡ç­¾ç­‰ä¸éœ€è¦åŸç”Ÿç¼–è¾‘èœå•çš„æ§ä»¶ |
|åŸç”Ÿå·¥å…·æç¤º |ä¸è°ƒç”¨ `setToolTip()` æˆ–è®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸² |ä½¿ç”¨è‡ªå®šä¹‰æç¤ºæˆ–ä¸éœ€è¦æç¤ºçš„æŒ‰é’® |
|ç„¦ç‚¹è™šçº¿æ¡† |`setFocusPolicy(Qt.FocusPolicy.NoFocus)` æˆ–æ ·å¼è¡¨ |ä¸éœ€è¦é”®ç›˜ç„¦ç‚¹çš„è£…é¥°æ€§æ§ä»¶ |

**ç¤ºä¾‹ - ç¦ç”¨è¾“å…¥æ¡†å³é”®èœå•ï¼š**

```python
from PySide6.QtWidgets import QLineEdit
from PySide6.QtCore import Qt

# åˆ›å»ºè¾“å…¥æ¡†å¹¶ç¦ç”¨åŸç”Ÿå³é”®èœå•
self.hex_input = QLineEdit()
self.hex_input.setContextMenuPolicy(Qt.ContextMenuPolicy.NoContextMenu)
```

**æ³¨æ„äº‹é¡¹ï¼š**

- ä»…åœ¨ç¡®å®ä¸éœ€è¦åŸç”ŸåŠŸèƒ½æ—¶ç¦ç”¨
- å¦‚æœéœ€è¦è‡ªå®šä¹‰å³é”®èœå•ï¼Œåº”ä½¿ç”¨ `RoundMenu` æ›¿ä»£
- ç¦ç”¨å·¥å…·æç¤ºæ—¶ï¼Œç¡®ä¿ç”¨æˆ·é€šè¿‡å…¶ä»–æ–¹å¼äº†è§£æŒ‰é’®åŠŸèƒ½

### 5.6 å³é”®èœå•è§„èŒƒ

- ä½¿ç”¨ `RoundMenu` åˆ›å»º Fluent é£æ ¼çš„å³é”®èœå•
- ä½¿ç”¨ `Action` åˆ›å»ºèœå•é¡¹

```python
from qfluentwidgets import RoundMenu, Action, FluentIcon

def contextMenuEvent(self, event):
    menu = RoundMenu("")
    change_action = Action(FluentIcon.PHOTO, "æ›´æ¢å›¾ç‰‡")
    menu.addAction(change_action)
    menu.exec(event.globalPos())
```


---

## 6. é¢œè‰²å¤„ç†è§„èŒƒ

### 6.1 é¢œè‰²ç©ºé—´è½¬æ¢

- æ‰€æœ‰é¢œè‰²è½¬æ¢å‡½æ•°æ”¾åœ¨ `core/color.py`
- è¿”å›ç»“æœåŒ…å«å®Œæ•´çš„é¢œè‰²ä¿¡æ¯

```python
def get_color_info(r, g, b):
    """è·å–é¢œè‰²çš„å®Œæ•´ä¿¡æ¯"""
    return {
        'rgb': (r, g, b),
        'hsb': (h, s, v),
        'lab': (l, a, b),
        'hex': rgb_to_hex(r, g, b)
    }
```

### 6.2 æ˜åº¦è®¡ç®—è§„èŒƒ

ä½¿ç”¨ Rec. 709 æ ‡å‡†è®¡ç®—äº®åº¦å€¼ï¼ŒåŒ…å« sRGB Gamma æ ¡æ­£ã€‚

```python
def get_luminance(r: int, g: int, b: int) -> int:
    """è®¡ç®—åƒç´ çš„æ˜åº¦å€¼ (0-255)
    
    ä½¿ç”¨ Rec. 709 æ ‡å‡†è®¡ç®—äº®åº¦å€¼ï¼ŒåŒ…å« sRGB Gamma æ ¡æ­£
    è¿™æ˜¯ Lightroomã€Photoshop ç­‰ä¸“ä¸šè½¯ä»¶ä½¿ç”¨çš„æ ‡å‡†æ–¹æ³•
    """
    # æ­¥éª¤1: å½’ä¸€åŒ–åˆ° 0-1 èŒƒå›´
    r_norm, g_norm, b_norm = r / 255.0, g / 255.0, b / 255.0

    # æ­¥éª¤2: sRGB Gamma è§£ç ï¼ˆè½¬æ¢åˆ°çº¿æ€§ç©ºé—´ï¼‰
    def srgb_to_linear(c):
        if c <= 0.04045:
            return c / 12.92
        else:
            return ((c + 0.055) / 1.055) ** 2.4

    r_linear = srgb_to_linear(r_norm)
    g_linear = srgb_to_linear(g_norm)
    b_linear = srgb_to_linear(b_norm)

    # æ­¥éª¤3: åœ¨çº¿æ€§ç©ºé—´åº”ç”¨ Rec. 709 æƒé‡
    luminance_linear = 0.2126 * r_linear + 0.7152 * g_linear + 0.0722 * b_linear

    # æ­¥éª¤4-5: ç¼–ç å› sRGB ç©ºé—´å¹¶è½¬æ¢åˆ° 0-255
    # ...
```

### 6.3 Zone åˆ†åŒºè§„èŒƒ

é‡‡ç”¨ Adobe å®˜æ–¹æ ‡å‡†çš„ 5 ä¸ªæ˜åº¦åŒºåŸŸï¼š

|åŒºåŸŸ |æ˜åº¦èŒƒå›´ |è‹±æ–‡å |æè¿° |
|:---:|:---:|:---:|:---|
|é»‘è‰² |0%â€“10% |Blacks |é»‘ç‚¹åŒºåŸŸï¼Œæœ€æš—çš„éƒ¨åˆ† |
|é˜´å½± |10%â€“30% |Shadows |é˜´å½±åŒºåŸŸï¼Œè¾ƒæš—çš„è‰²è°ƒ |
|ä¸­é—´è°ƒ |30%â€“70% |Midtones |ä¸­é—´äº®åº¦åŒºåŸŸï¼Œç”± Exposure/Contrast è´Ÿè´£è°ƒæ•´ |
|é«˜å…‰ |70%â€“90% |Highlights |é«˜å…‰åŒºåŸŸï¼Œè¾ƒäº®çš„è‰²è°ƒ |
|ç™½è‰² |90%â€“100% |Whites |ç™½ç‚¹åŒºåŸŸï¼Œæœ€äº®çš„éƒ¨åˆ† |

**æŠ€æœ¯æ˜ å°„ï¼ˆ0-255 å€¼åˆ° Adobe åŒºåŸŸï¼‰ï¼š**

|Zone |æ˜åº¦èŒƒå›´ |Adobe åŒºåŸŸ |
|:---:|:---:|:---:|
|Zone 0 |0-25 |é»‘è‰²(Blacks) |
|Zone 1 |26-51 |é»‘è‰²(Blacks) |
|Zone 2 |52-76 |é˜´å½±(Shadows) |
|Zone 3 |77-102 |ä¸­é—´è°ƒ(Midtones) |
|Zone 4 |103-128 |ä¸­é—´è°ƒ(Midtones) |
|Zone 5 |129-153 |ä¸­é—´è°ƒ(Midtones) |
|Zone 6 |154-179 |ä¸­é—´è°ƒ(Midtones) |
|Zone 7 |180-204 |é«˜å…‰(Highlights) |
|Zone 8 |205-255 |ç™½è‰²(Whites) |


---

## 7. å›¾ç‰‡å¤„ç†è§„èŒƒ

### 7.1 å›¾ç‰‡åŠ è½½è§„èŒƒ

- ä¿ç•™åŸå§‹é«˜åˆ†è¾¨ç‡å›¾ç‰‡
- ä½¿ç”¨ `QPixmap` ç”¨äºæ˜¾ç¤ºï¼Œ`QImage` ç”¨äºåƒç´ è¯»å–
- ä½¿ç”¨å¤šçº¿ç¨‹å¼‚æ­¥åŠ è½½å¤§å›¾ç‰‡

### 7.2 åæ ‡æ˜ å°„è§„èŒƒ

**æ ¸å¿ƒåŸåˆ™ï¼š** é‡‡æ ·ç‚¹ä½ç½®ä½¿ç”¨**å›¾ç‰‡ç›¸å¯¹åæ ‡**ï¼ˆå½’ä¸€åŒ–åæ ‡ 0.0-1.0ï¼‰å­˜å‚¨ã€‚

|åæ ‡ç±»å‹ |è¯´æ˜ |èŒƒå›´ |
|:---:|:---|:---:|
|ç›¸å¯¹åæ ‡ |ç›¸å¯¹äºå›¾ç‰‡çš„å½’ä¸€åŒ–åæ ‡ |0.0-1.0 |
|ç”»å¸ƒåæ ‡ |ç›¸å¯¹äºç”»å¸ƒæ§ä»¶çš„åƒç´ åæ ‡ |åƒç´ å€¼ |

```python
# ç›¸å¯¹åæ ‡ â†’ ç”»å¸ƒåæ ‡
canvas_x = disp_x + rel_x * disp_w

# ç”»å¸ƒåæ ‡ â†’ ç›¸å¯¹åæ ‡
rel_x = (canvas_x - disp_x) / disp_w
```

### 7.3 æ€§èƒ½ä¼˜åŒ–è§„èŒƒ

**åŸºæœ¬ç­–ç•¥ï¼š**

- ä½¿ç”¨ `QThread` åœ¨å­çº¿ç¨‹è¯»å–å›¾ç‰‡æ–‡ä»¶
- ä½¿ç”¨ `QTimer.singleShot()` å»¶è¿Ÿæ‰§è¡Œè€—æ—¶æ“ä½œ
- ç›´æ–¹å›¾è®¡ç®—ä½¿ç”¨é‡‡æ ·ä¼˜åŒ–

**QThread å–æ¶ˆæœºåˆ¶ï¼š**

- ä½¿ç”¨æ ‡å¿—ä½æœºåˆ¶å®ç°çº¿ç¨‹å–æ¶ˆï¼Œé¿å…ä½¿ç”¨ `wait()` é˜»å¡UIçº¿ç¨‹
- åœ¨ `run()` æ–¹æ³•çš„å…³é”®æ£€æŸ¥ç‚¹æ£€æŸ¥å–æ¶ˆæ ‡å¿—
- ä¸ç­‰å¾…æ—§çº¿ç¨‹ç»“æŸï¼Œç«‹å³å¯åŠ¨æ–°çº¿ç¨‹

```python
class ImageLoader(QThread):
    """å›¾ç‰‡åŠ è½½çº¿ç¨‹ï¼ˆæ”¯æŒå–æ¶ˆï¼‰"""
    
    def __init__(self, image_path: str) -> None:
        super().__init__()
        self._image_path = image_path
        self._is_cancelled = False  # å–æ¶ˆæ ‡å¿—
    
    def cancel(self) -> None:
        """è¯·æ±‚å–æ¶ˆåŠ è½½ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰"""
        self._is_cancelled = True
    
    def _check_cancelled(self) -> bool:
        """æ£€æŸ¥æ˜¯å¦è¢«å–æ¶ˆ"""
        return self._is_cancelled
    
    def run(self) -> None:
        """åœ¨å­çº¿ç¨‹ä¸­åŠ è½½å›¾ç‰‡"""
        try:
            with Image.open(self._image_path) as pil_image:
                # å…³é”®æ£€æŸ¥ç‚¹1
                if self._check_cancelled():
                    return
                
                # è€—æ—¶æ“ä½œå‰æ£€æŸ¥
                if self._check_cancelled():
                    return
                
                # æ‰§è¡Œè€—æ—¶æ“ä½œ...
                
                # å…³é”®æ£€æŸ¥ç‚¹2
                if self._check_cancelled():
                    return
                    
        except Exception as e:
            if not self._check_cancelled():
                self.error.emit(str(e))

# ä½¿ç”¨ç¤ºä¾‹ï¼ˆéé˜»å¡åˆ‡æ¢ï¼‰
def set_image(self, image_path: str) -> None:
    # å–æ¶ˆæ—§çº¿ç¨‹ï¼ˆéé˜»å¡ï¼‰
    if self._loader is not None:
        self._loader.cancel()
        # æ³¨æ„ï¼šä¸è°ƒç”¨ wait()ï¼Œé¿å…é˜»å¡UIçº¿ç¨‹
        self._loader = None
    
    # ç«‹å³å¯åŠ¨æ–°çº¿ç¨‹
    self._loader = ImageLoader(image_path)
    self._loader.start()
```

**UIæ€§èƒ½ä¼˜åŒ–ï¼š**

- æ‰¹é‡æ›´æ–°UIæ—¶ä½¿ç”¨ `setUpdatesEnabled(False/True)` åŒ…è£¹æ›´æ–°æ“ä½œ
- é¿å…åœ¨å¾ªç¯ä¸­é¢‘ç¹æ›´æ–°UIï¼Œå…ˆæ”¶é›†æ•°æ®å†æ‰¹é‡æ›´æ–°
- ä½¿ç”¨ `try-finally` ç¡®ä¿ `setUpdatesEnabled(True)` ä¸€å®šä¼šæ‰§è¡Œ

```python
# æ‰¹é‡æ›´æ–°UIç¤ºä¾‹
def update_table_data(self):
    self.table.setUpdatesEnabled(False)
    try:
        for row in range(self.table.rowCount()):
            self.table.setItem(row, 0, item)
    finally:
        self.table.setUpdatesEnabled(True)
```

**æ•°æ®ç»“æ„ä¼˜åŒ–ï¼š**

- å°†åˆ—è¡¨è½¬æ¢ä¸ºé›†åˆï¼Œå°†æŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ä» O(n) é™åˆ° O(1)
- ç¼“å­˜è®¡ç®—ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—å’ŒI/Oæ“ä½œ
- ç¼“å­˜åº”åœ¨æ•°æ®å˜åŒ–æ—¶è‡ªåŠ¨å¤±æ•ˆï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§

**åº”ç”¨å¯åŠ¨ä¼˜åŒ–ç­–ç•¥ï¼š**

- **ç•Œé¢é¢„åˆ›å»ºç­–ç•¥**ï¼šå¯åŠ¨æ—¶åˆ›å»ºæ‰€æœ‰ç•Œé¢ï¼Œé¿å…åˆ‡æ¢æ—¶çš„è§†è§‰é—ªçƒ
  - ä¼˜ç‚¹ï¼šåˆ‡æ¢æµç•…ï¼Œæ— å»¶è¿Ÿ
  - ç¼ºç‚¹ï¼šå¯åŠ¨æ—¶é—´å¢åŠ 
- **ç»„ä»¶ç¼“å­˜å»¶è¿Ÿç”Ÿæˆ**ï¼šè€—æ—¶è®¡ç®—ï¼ˆå¦‚è‰²è½®é€åƒç´ æ¸²æŸ“ï¼‰å»¶è¿Ÿåˆ°é¦–æ¬¡ç»˜åˆ¶æ—¶æ‰§è¡Œ
  - ä½¿ç”¨ `QTimer.singleShot(0, self._generate_cache)` å¼‚æ­¥ç”Ÿæˆ
  - ç”ŸæˆæœŸé—´å…ˆæ˜¾ç¤ºç®€å•èƒŒæ™¯ï¼Œå®Œæˆååˆ·æ–°

**ç¤ºä¾‹ - è‰²è½®ç¼“å­˜å»¶è¿Ÿç”Ÿæˆï¼š**

```python
def paintEvent(self, event):
    painter = QPainter(self)
    painter.setRenderHint(QPainter.RenderHint.Antialiasing)

    # æ£€æŸ¥æ˜¯å¦éœ€è¦é‡æ–°ç”Ÿæˆç¼“å­˜
    if not self._cache_valid:
        # å»¶è¿Ÿç”Ÿæˆç¼“å­˜ï¼Œé¿å…é˜»å¡å¯åŠ¨
        if not self._pending_generation:
            self._pending_generation = True
            QTimer.singleShot(0, self._generate_wheel_cache_async)
        # ç»˜åˆ¶ç®€å•èƒŒæ™¯
        painter.fillRect(self.rect(), self._get_theme_colors()['bg'])
    elif self._wheel_cache:
        # ç»˜åˆ¶ç¼“å­˜çš„è‰²ç¯èƒŒæ™¯
        painter.drawPixmap(0, 0, self._wheel_cache)

    # ç»˜åˆ¶å…¶ä»–å†…å®¹...

def _generate_wheel_cache_async(self):
    """å¼‚æ­¥ç”Ÿæˆè‰²è½®ç¼“å­˜"""
    self._pending_generation = False
    self._generate_wheel_cache()
    self.update()
```

**å†³ç­–åŸåˆ™ï¼š**

- ç•Œé¢ç»“æ„ç®€å• â†’ é¢„åˆ›å»ºæ‰€æœ‰ç•Œé¢
- ç•Œé¢ç»“æ„å¤æ‚/ç»„ä»¶åˆå§‹åŒ–è€—æ—¶ â†’ å»¶è¿Ÿåˆ›å»ºï¼ˆéœ€ç¡®ä¿åˆ‡æ¢æ— é—ªçƒï¼‰
- ç»˜åˆ¶å¯†é›†å‹ç»„ä»¶ï¼ˆè‰²è½®ã€ç›´æ–¹å›¾ï¼‰ â†’ å»¶è¿Ÿç”Ÿæˆç¼“å­˜


---

## 8. é…è‰²æ•°æ®JSONæ ¼å¼è§„èŒƒ

### 8.1 æ¦‚è¿°

é…è‰²æ•°æ®ç»Ÿä¸€ä½¿ç”¨ `palettes` æ ¼å¼å­˜å‚¨ï¼Œæ”¯æŒåˆ†ç»„é…ç½®å’Œç¤¾åŒºè´¡çŒ®ã€‚æ‰€æœ‰é…è‰²JSONæ–‡ä»¶ä½äº `color_data/` ç›®å½•ã€‚

### 8.2 æ ‡å‡†æ ¼å¼

```json
{
  "version": "1.0",
  "id": "material_design",
  "name": "Material Design",
  "name_zh": "Material Design é…è‰²",
  "description": "Google Material Design å®˜æ–¹é…è‰²ç³»ç»Ÿ",
  "author": "Google",
  "category": "design_system",
  "palettes": [
    {
      "name": "çº¢è‰²",
      "colors": ["#ffebee", "#ffcdd2", "#ef9a9a", "#e57373", "#f44336"]
    }
  ],
  "groups": [
    {
      "name": "çº¢/ç²‰/ç´«ç»„",
      "indices": [0, 1, 2, 3]
    }
  ]
}
```

### 8.3 å­—æ®µè¯´æ˜

|å­—æ®µ |ç±»å‹ |å¿…å¡« |è¯´æ˜ |
|:---|:---:|:---:|:---|
|`version` |string |æ˜¯ |æ ¼å¼ç‰ˆæœ¬å·ï¼Œå½“å‰ä¸º "1.0" |
|`id` |string |æ˜¯ |å”¯ä¸€æ ‡è¯†ç¬¦ |
|`name` |string |æ˜¯ |é…è‰²æ–¹æ¡ˆåç§°ï¼ˆè‹±æ–‡ï¼‰ |
|`name_zh` |string |å¦ |é…è‰²æ–¹æ¡ˆä¸­æ–‡åç§° |
|`description` |string |å¦ |æè¿°ä¿¡æ¯ |
|`author` |string |æ˜¯ |ä½œè€…åç§° |
|`category` |string |å¦ |åˆ†ç±»ï¼š`design_system`/`theme`/`palette`/`user_palette` |
|`palettes` |array |æ˜¯ |é…è‰²ç»„åˆ—è¡¨ |
|`palettes[].name` |string |æ˜¯ |é…è‰²ç»„åç§° |
|`palettes[].colors` |array |æ˜¯ |é¢œè‰²å€¼æ•°ç»„ï¼ˆHEXæ ¼å¼ï¼‰ |
|`groups` |array |å¦ |åˆ†ç»„å®šä¹‰ï¼ˆå¯é€‰ï¼‰ |
|`groups[].name` |string |æ˜¯ |åˆ†ç»„æ˜¾ç¤ºåç§° |
|`groups[].indices` |array |æ˜¯ |é…è‰²ç»„ç´¢å¼•åˆ—è¡¨ |

### 8.4 åˆ†ç»„é…ç½®

åˆ†ç»„ç”¨äºå°†å¤§é‡é…è‰²æŒ‰é€»è¾‘åˆ†ç±»æ˜¾ç¤ºï¼Œæå‡æµè§ˆä½“éªŒã€‚

**åˆ†ç»„è§„åˆ™**ï¼š

|é…è‰²ç»„æ•°é‡ |åˆ†ç»„æ–¹å¼ |ç¤ºä¾‹ |
|:---:|:---|:---|
|< 20 |å•åˆ†ç»„ |"å…¨éƒ¨ (15ç»„)" |
|â‰¥ 20 |æŒ‰20ç»„åˆ†ç»„ |"ç¬¬ 1-20 ç»„"ã€"ç¬¬ 21-40 ç»„" |

**åˆ†ç»„ç¤ºä¾‹**ï¼š

```json
{
  "groups": [
    {"name": "å…¨éƒ¨ (15ç»„)", "indices": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]}
  ]
}
```

### 8.5 ç¤¾åŒºè´¡çŒ®

æ·»åŠ æ–°çš„é…è‰²æºåªéœ€åœ¨ `color_data/` ç›®å½•ä¸‹æ”¾ç½®ç¬¦åˆæ ¼å¼çš„JSONæ–‡ä»¶ï¼Œåº”ç”¨å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨å‘ç°å¹¶åŠ è½½ã€‚

**è´¡çŒ®æ­¥éª¤**ï¼š

1. åˆ›å»ºç¬¦åˆæ ‡å‡†æ ¼å¼çš„JSONæ–‡ä»¶
2. å°†æ–‡ä»¶æ”¾ç½®åˆ° `color_data/` ç›®å½•
3. é‡å¯åº”ç”¨ï¼Œæ–°é…è‰²æºè‡ªåŠ¨å‡ºç°åœ¨å†…ç½®è‰²å½©é¢æ¿

**å¯¼å‡ºé…è‰²ä½œä¸ºè´¡çŒ®**ï¼š

ç”¨æˆ·å¯åœ¨é…è‰²ç®¡ç†é¢æ¿å¯¼å‡ºé…è‰²ï¼Œå¯¼å‡ºçš„JSONæ–‡ä»¶ç¬¦åˆæ ‡å‡†æ ¼å¼ï¼Œå¯ç›´æ¥ä½œä¸ºé…è‰²æºä½¿ç”¨ã€‚

---

## 9. åœºæ™¯é…ç½®åŒ–è§„èŒƒ

### 9.1 æ¦‚è¿°

é…è‰²é¢„è§ˆåŠŸèƒ½æ”¯æŒé€šè¿‡ JSON é…ç½®æ–‡ä»¶å®šä¹‰å’Œæ‰©å±•é¢„è§ˆåœºæ™¯ï¼Œå®ç°åœºæ™¯çš„çƒ­æ’æ‹”å’ŒåŠ¨æ€åŠ è½½ã€‚

### 9.2 é…ç½®æ–‡ä»¶ç»“æ„

**å†…ç½®åœºæ™¯é…ç½®** (`preview_scenes/scenes.json`)ï¼š

```json
{
  "version": "2.0",
  "scenes": [
    {
      "id": "ui",
      "name": "UIè®¾è®¡",
      "type": "configurable",
      "description": "æ‰‹æœºåº”ç”¨ç•Œé¢é¢„è§ˆ",
      "icon": "phone",
      "builtin": true,
      "config": {
        "frame": {
          "width_ratio": 0.6,
          "height_ratio": 0.5,
          "margin": 6,
          "border_radius": 20
        },
        "content": {
          "texts": {
            "title_card": "é¦–é¡µ",
            "list_item_prefix": "é¡¹ç›®"
          }
        }
      }
    }
  ]
}
```

**å­—æ®µè¯´æ˜ï¼š**

|å­—æ®µ |ç±»å‹ |å¿…å¡« |è¯´æ˜ |
|:---|:---:|:---:|:---|
|`id` |string |æ˜¯ |åœºæ™¯å”¯ä¸€æ ‡è¯†ç¬¦ |
|`name` |string |æ˜¯ |åœºæ™¯æ˜¾ç¤ºåç§°ï¼ˆä¸­æ–‡ï¼‰ |
|`type` |string |æ˜¯ |åœºæ™¯ç±»å‹ï¼Œå†³å®šä½¿ç”¨å“ªä¸ªæ¸²æŸ“ç±» |
|`description` |string |å¦ |åœºæ™¯æè¿° |
|`icon` |string |å¦ |å›¾æ ‡æ ‡è¯† |
|`builtin` |bool |æ˜¯ |æ˜¯å¦ä¸ºå†…ç½®åœºæ™¯ |
|`config` |object |å¦ |åœºæ™¯ç‰¹å®šé…ç½®å‚æ•° |

### 8.3 åœºæ™¯ç±»å‹è§„èŒƒ

**ç°æœ‰åœºæ™¯ç±»å‹ï¼š**

|ç±»å‹ |è¯´æ˜ |å¯¹åº”ç±» |
|:---|:---|:---|
|`svg` |SVGè‡ªå®šä¹‰é¢„è§ˆ |`SVGPreviewWidget` |
|`composite` |æ··åˆå¸ƒå±€ï¼ˆ2x2æ’ç”»+æ’ç‰ˆï¼‰ |`MixedPreviewPanel` |
|`configurable` |é…ç½®åŒ–åœºæ™¯ï¼ˆui/web/illustration/typography/brand/poster/pattern/magazineï¼‰ |`ConfigurablePreviewScene` |
|`placeholder` |å ä½åœºæ™¯ï¼ˆå¾…å®ç°ï¼‰ |- |

### 8.4 æ·»åŠ æ–°åœºæ™¯

**æ–¹å¼ä¸€ï¼šä½¿ç”¨ç°æœ‰ç±»å‹ï¼ˆä»…éœ€é…ç½®ï¼‰**


1. åœ¨ `preview_scenes/scenes.json` ä¸­æ·»åŠ åœºæ™¯å®šä¹‰
2. é‡å¯åº”ç”¨å³å¯ç”Ÿæ•ˆ

**æ–¹å¼äºŒï¼šæ–°åœºæ™¯ç±»å‹ï¼ˆéœ€è¦ä»£ç ï¼‰**


1. åˆ›å»ºåœºæ™¯ç±»ç»§æ‰¿ `BasePreviewScene`ï¼š

```python
class DashboardPreview(BasePreviewScene):
    """ä»ªè¡¨ç›˜åœºæ™¯é¢„è§ˆ"""
    
    def paintEvent(self, event):
        painter = QPainter(self)
        # è‡ªå®šä¹‰ç»˜åˆ¶é€»è¾‘
```


2. æ³¨å†Œåˆ°åœºæ™¯å·¥å‚ï¼š

```python
PreviewSceneFactory.register("dashboard", DashboardPreview)
```


3. åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ åœºæ™¯å®šä¹‰

### 8.5 åœºæ™¯é…ç½®ç®¡ç†

**ä½¿ç”¨ SceneConfigManagerï¼š**

```python
from core import get_scene_config_manager

scene_manager = get_scene_config_manager()

# è·å–æ‰€æœ‰åœºæ™¯
all_scenes = scene_manager.get_all_scenes()

# å¯¼å…¥åœºæ™¯é…ç½®
success, message = scene_manager.import_scene("path/to/scene.json")

# å¯¼å‡ºåœºæ™¯é…ç½®
success, message = scene_manager.export_scene("scene_id", "path/to/export.json")
```

### 8.6 ç”¨æˆ·è‡ªå®šä¹‰åœºæ™¯

- ç”¨æˆ·åœºæ™¯ä¿å­˜åœ¨ `preview_scenes/user_scenes/` ç›®å½•
- æ–‡ä»¶æ ¼å¼ä¸å†…ç½®åœºæ™¯ç›¸åŒ
- ç”¨æˆ·åœºæ™¯ ID ä¸èƒ½ä¸å†…ç½®åœºæ™¯å†²çª
- åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½


---

## 10. ç•Œé¢å¸ƒå±€è§„èŒƒ

### 10.1 å¸ƒå±€åŸåˆ™

- ä½¿ç”¨å¸ƒå±€ç®¡ç†å™¨ï¼ˆQVBoxLayout, QHBoxLayoutï¼‰
- é¿å…ä½¿ç”¨å›ºå®šå°ºå¯¸ï¼Œä¼˜å…ˆä½¿ç”¨ size policy

### 10.2 é˜²æ­¢å¸ƒå±€é‡å çš„è§„èŒƒ

**é—®é¢˜æè¿°ï¼š**
å½“çª—å£è¢«å‹ç¼©ï¼ˆå°¤å…¶æ˜¯å‚ç›´æ–¹å‘ï¼‰æ—¶ï¼Œç»„ä»¶ä¹‹é—´å¯èƒ½å‡ºç°é‡å ï¼Œå¯¼è‡´ç•Œé¢æ˜¾ç¤ºå¼‚å¸¸ã€‚

**æ ¹æœ¬åŸå› ï¼š**


1. ç»„ä»¶è®¾ç½®äº†è¿‡å¤§çš„ `minimumSize`ï¼Œå¯¼è‡´æ— æ³•å‹ç¼©
2. ç¼ºå°‘ `sizePolicy` è®¾ç½®ï¼Œç»„ä»¶æ— æ³•æ­£ç¡®å“åº”å¸ƒå±€å˜åŒ–
3. ä½¿ç”¨ `setFixedHeight()` ç­‰å›ºå®šå°ºå¯¸æ–¹æ³•ï¼Œé˜»æ­¢äº†è‡ªåŠ¨è°ƒæ•´

**è§£å†³æ–¹æ¡ˆï¼š**


1. **è®¾ç½®åˆç†çš„ minimumSize**

   ```python
   # é”™è¯¯ç¤ºä¾‹ï¼šæœ€å°å°ºå¯¸è¿‡å¤§ï¼Œå¯¼è‡´æ— æ³•å‹ç¼©
   self.setMinimumSize(600, 400)
   
   # æ­£ç¡®ç¤ºä¾‹ï¼šæ ¹æ®å†…å®¹è®¾ç½®åˆç†çš„æœ€å°å°ºå¯¸
   self.setMinimumSize(300, 200)
   ```
2. **ä½¿ç”¨ sizePolicy æ§åˆ¶æ‰©å±•è¡Œä¸º**

   ```python
   from PySide6.QtWidgets import QSizePolicy
   
   # å…è®¸ç»„ä»¶åœ¨æ°´å¹³å’Œå‚ç›´æ–¹å‘ä¸Šéƒ½å……åˆ†æ‰©å±•å’Œå‹ç¼©
   self.setSizePolicy(QSizePolicy.Policy.Expanding, QSizePolicy.Policy.Expanding)
   
   # è‰²å¡é¢æ¿ï¼šæ°´å¹³æ‰©å±•ï¼Œå‚ç›´ä¼˜å…ˆå‹ç¼©
   self.setSizePolicy(QSizePolicy.Policy.Expanding, QSizePolicy.Policy.Preferred)
   ```
3. **é¿å…ä½¿ç”¨å›ºå®šå°ºå¯¸ï¼Œä½¿ç”¨æœ€å°/æœ€å¤§å°ºå¯¸èŒƒå›´**

   ```python
   # é”™è¯¯ç¤ºä¾‹ï¼šå›ºå®šé«˜åº¦ï¼Œæ— æ³•è°ƒæ•´
   self.color_block.setFixedHeight(80)
   
   # æ­£ç¡®ç¤ºä¾‹ï¼šå…è®¸åœ¨ä¸€å®šèŒƒå›´å†…è°ƒæ•´
   self.color_block.setMinimumHeight(40)
   self.color_block.setMaximumHeight(80)
   ```
4. **ä¸ºå…³é”®åŒºåŸŸè®¾ç½®æœ€å°é«˜åº¦çº¦æŸ**

   ```python
   # æ•°å€¼åŒºåŸŸéœ€è¦ä¿è¯æ–‡å­—å¯è§
   self.values_container.setMinimumHeight(60)
   
   # 16è¿›åˆ¶æ˜¾ç¤ºåŒºåŸŸ
   self.hex_container.setMinimumHeight(30)
   self.hex_container.setMaximumHeight(40)
   ```
5. **QSplitter ä¸­çš„ç»„ä»¶è®¾ç½®**

   ```python
   # ä¸º splitter ä¸­çš„æ¯ä¸ªç»„ä»¶è®¾ç½®æœ€å°é«˜åº¦
   main_splitter.setMinimumHeight(400)
   
   # ä¸º splitter ä¸­çš„å­ç»„ä»¶è®¾ç½®çº¦æŸ
   self.image_canvas.setMinimumHeight(200)
   self.color_card_panel.setMinimumHeight(200)
   ```

**å®è·µï¼š**

- å§‹ç»ˆä¸ºè‡ªå®šä¹‰ç»„ä»¶è®¾ç½® `sizePolicy`
- æœ€å°å°ºå¯¸åº”æ ¹æ®å†…å®¹å®é™…éœ€æ±‚è®¾ç½®ï¼Œä¸å®œè¿‡å¤§
- ä½¿ç”¨ `setMinimumHeight()` å’Œ `setMaximumHeight()` ç»„åˆä»£æ›¿ `setFixedHeight()`
- åœ¨ QSplitter ä¸­ï¼Œä¸ºæ¯ä¸ªå­ç»„ä»¶è®¾ç½®åˆç†çš„æœ€å°å°ºå¯¸
- æµ‹è¯•æ—¶å°è¯•å°†çª—å£å‹ç¼©åˆ°æœ€å°å°ºå¯¸ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰é‡å 

### 10.3 æ§ä»¶å°ºå¯¸å‚è€ƒ

|æ§ä»¶ |æ¨èå°ºå¯¸ |ç´§å‡‘å°ºå¯¸ |è¯´æ˜ |
|:---:|:---:|:---:|:---|
|ä¸»çª—å£ |940Ã—660 |- |é»˜è®¤å°ºå¯¸ |
|ä¸»çª—å£æœ€å° |800Ã—550 |- |ä¿è¯å†…å®¹å®Œæ•´æ˜¾ç¤º |
|ç”»å¸ƒæœ€å° |300Ã—200 |300Ã—150 |å›¾ç‰‡æ˜¾ç¤ºåŒºåŸŸ |
|è‰²å¡é¢æ¿æœ€å°é«˜åº¦ |200 |130 |ä¿è¯è‰²å¡å†…å®¹å¯è§ |
|å•ä¸ªè‰²å¡æœ€å°é«˜åº¦ |160 |120 |åŒ…å«è‰²å—+æ–‡å­—+16è¿›åˆ¶ |
|è‰²å—é«˜åº¦èŒƒå›´ |40-80 |30-80 |å¯å‹ç¼©èŒƒå›´ |
|æ•°å€¼åŒºåŸŸæœ€å°é«˜åº¦ |60 |45 |HSB/LABç­‰æ•°å€¼æ˜¾ç¤º |
|16è¿›åˆ¶åŒºåŸŸæœ€å°é«˜åº¦ |30 |26 |16è¿›åˆ¶ç æ˜¾ç¤ºåŒº |
|å–è‰²ç‚¹åŠå¾„ |12px |- |ä¾¿äºæ‹–åŠ¨æ“ä½œ |
|æŒ‰é’®é«˜åº¦ |28-32 |24 |æ ¹æ®ç©ºé—´è°ƒæ•´ |


### 10.4 ç½‘æ ¼å¸ƒå±€è‡ªé€‚åº”å®½åº¦ç»éªŒ

**é—®é¢˜æè¿°ï¼š**
å½“ä½¿ç”¨ QGridLayout æ˜¾ç¤ºå¤šè¡Œè‰²å¡ï¼Œä¸”æ¯è¡Œè‰²å¡æ•°é‡ä¸åŒæ—¶ï¼ˆå¦‚ç¬¬ä¸€è¡Œ6ä¸ªï¼Œç¬¬ä¸‰è¡Œ4ä¸ªï¼‰ï¼Œæ— æ³•å®ç°æ¯è¡Œç‹¬ç«‹å æ»¡æ•´è¡Œå®½åº¦ã€‚

**æ ¹æœ¬åŸå› ï¼š**
- QGridLayout çš„æ‰€æœ‰è¡Œå…±äº«ç›¸åŒçš„åˆ—å®½
- ä¸åŒè¡Œçš„åˆ—æ•°ä¸åŒä¼šå¯¼è‡´æ‹‰ä¼¸æ•ˆæœä¸ä¸€è‡´
- è®¾ç½® `setColumnStretch` åªåœ¨åˆ—æ•°ç›¸åŒæ—¶æœ‰æ•ˆ

**è§£å†³æ–¹æ¡ˆï¼š**
æ”¹ç”¨ **å‚ç›´å¸ƒå±€ + æ°´å¹³å¸ƒå±€** çš„ç»„åˆæ–¹å¼ï¼š

```python
# å¤–å±‚ä½¿ç”¨å‚ç›´å¸ƒå±€
self.cards_layout = QVBoxLayout()
self.cards_layout.setSpacing(10)

# è®¡ç®—æ¯è¡Œæ˜¾ç¤ºçš„åˆ—æ•°
columns = self._calculate_columns(len(colors))

# æŒ‰è¡Œåˆ›å»ºè‰²å¡
current_row_layout = None
for i, color in enumerate(colors):
    # æ¯è¡Œå¼€å§‹æ—¶åˆ›å»ºæ–°çš„æ°´å¹³å¸ƒå±€
    if i % columns == 0:
        current_row_layout = QHBoxLayout()
        current_row_layout.setContentsMargins(0, 0, 0, 0)
        current_row_layout.setSpacing(10)
        self.cards_layout.addLayout(current_row_layout)
    
    card = ColorCard()
    # ... è®¾ç½®å¡ç‰‡å±æ€§ ...
    
    # æ·»åŠ åˆ°å½“å‰è¡Œçš„æ°´å¹³å¸ƒå±€ï¼Œè®¾ç½®stretch=1ä½¿è‰²å¡å‡åŒ€åˆ†å¸ƒ
    current_row_layout.addWidget(card, stretch=1)
```

**æ¸…ç©ºå¸ƒå±€çš„æ–¹æ³•ï¼š**

```python
def _clear_color_cards(self):
    """æ¸…ç©ºæ‰€æœ‰è‰²å¡"""
    # æ¸…ç©ºè‰²å¡åˆ—è¡¨
    for card in self._color_cards:
        card.deleteLater()
    self._color_cards.clear()
    
    # æ¸…ç©ºæ‰€æœ‰è¡Œå¸ƒå±€
    while self.cards_layout.count():
        item = self.cards_layout.takeAt(0)
        if item.layout():
            # åˆ é™¤è¡Œå¸ƒå±€ä¸­çš„æ‰€æœ‰è‰²å¡
            while item.layout().count():
                child = item.layout().takeAt(0)
                if child.widget():
                    child.widget().deleteLater()
```

**å†³ç­–åŸåˆ™ï¼š**
- æ¯è¡Œåˆ—æ•°ç›¸åŒ â†’ ä½¿ç”¨ QGridLayout
- æ¯è¡Œåˆ—æ•°ä¸åŒ â†’ ä½¿ç”¨å‚ç›´+æ°´å¹³ç»„åˆå¸ƒå±€

---

## 11. äº¤äº’è®¾è®¡è§„èŒƒ

### 11.1 å–è‰²ç‚¹äº¤äº’

- é¼ æ ‡æ‚¬åœï¼šæ˜¾ç¤ºæ‰‹å‹å…‰æ ‡
- æ‹–åŠ¨æ—¶ï¼šå®æ—¶æ›´æ–°é¢œè‰²å€¼
- è¾¹ç•Œé™åˆ¶ï¼šé™åˆ¶åœ¨å›¾ç‰‡æ˜¾ç¤ºåŒºåŸŸå†…

### 11.2 å¿«æ·é”®è§„èŒƒ

|å¿«æ·é”® |åŠŸèƒ½ |
|:---:|:---:|
|Ctrl + O |æ‰“å¼€å›¾ç‰‡ |
|Ctrl + Q |é€€å‡ºç¨‹åº |

---

## 12. ç‰ˆæœ¬ç®¡ç†è§„èŒƒ

### 12.1 ç‰ˆæœ¬å·æ ¼å¼

- æ ¼å¼ï¼š`ä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.ä¿®è®¢ç‰ˆæœ¬`
- ç¤ºä¾‹ï¼š`1.0.0`
- ä¸»ç‰ˆæœ¬ï¼šé‡å¤§åŠŸèƒ½æ›´æ–°
- æ¬¡ç‰ˆæœ¬ï¼šæ–°å¢åŠŸèƒ½
- ä¿®è®¢ç‰ˆæœ¬ï¼šbug ä¿®å¤

### 12.2 æäº¤ä¿¡æ¯è§„èŒƒ

**æ ¼å¼ï¼š** `[ç±»å‹] è¯¦ç»†æè¿°`

**ç±»å‹ï¼š**

- `æ–°åŠŸèƒ½`ï¼šæ–°å¢åŠŸèƒ½æˆ–ç‰¹æ€§
- `ä¿®å¤`ï¼šä¿®å¤ä»£ç ä¸­çš„é”™è¯¯
- `ä¼˜åŒ–`ï¼šæ€§èƒ½æˆ–ä½“éªŒæ”¹è¿›
- `é‡æ„`ï¼šä»£ç ç»“æ„è°ƒæ•´
- `æ–‡æ¡£`ï¼šä¿®æ”¹æˆ–æ–°å¢æ–‡æ¡£
- `æ ·å¼`ï¼šç•Œé¢æ ·å¼ã€é¢œè‰²ã€å¸ƒå±€ç­‰è§†è§‰ç›¸å…³ä¿®æ”¹
- `å†…å®¹è°ƒæ•´`ï¼šå¦‚æ›¿æ¢é“¾æ¥ã€ä¿®æ”¹æ–‡æœ¬ç­‰

**ç¤ºä¾‹ï¼š**

- `[æ–°åŠŸèƒ½] æ–°å¢ç”¨æˆ·ç®¡ç†åŠŸèƒ½`
- `[ä¿®å¤] ä¿®å¤ç™»å½•åŠŸèƒ½çš„éªŒè¯é€»è¾‘é”™è¯¯`
- `[é‡æ„] æå– BaseCanvas åŸºç±»ï¼Œæ¶ˆé™¤é‡å¤ä»£ç `
- `[æ–‡æ¡£] æ›´æ–° README.md å’Œå¼€å‘è§„èŒƒ`
- `[æ ·å¼] ç»Ÿä¸€å›¾ç‰‡æ˜¾ç¤ºåŒºåŸŸå’Œè‰²ç¯èƒŒæ™¯è‰²ä¸ºçº¯é»‘è‰²`


---

## 13. æ›´æ–°æ—¥å¿—æ ¼å¼è§„èŒƒ

### 13.1 æ›´æ–°æ—¥å¿—ç»“æ„

**æ–‡ä»¶ä½ç½®ï¼š** é¡¹ç›®æ ¹ç›®å½• `CHANGELOG.md`

**ç‰ˆæœ¬æ ¼å¼ï¼š**

```markdown
# ğŸ¨ å–è‰²å¡ v{ä¸»ç‰ˆæœ¬}.{æ¬¡ç‰ˆæœ¬} æ›´æ–°æ—¥å¿—

## âœ¨ æ–°å¢åŠŸèƒ½

**{åŠŸèƒ½æ¨¡å—åç§°}**
- æ–°å¢{åŠŸèƒ½æè¿°}
- ...

## ğŸ”§ é—®é¢˜ä¿®å¤

- ä¿®å¤{é—®é¢˜æè¿°}
- ...

## ğŸ¨ ç•Œé¢ä¼˜åŒ–

- {ä¼˜åŒ–æè¿°}
- ...

## âš¡ æ€§èƒ½æå‡

- {ä¼˜åŒ–æè¿°}
- ...

## ğŸ—ï¸ ä»£ç é‡æ„

- {é‡æ„æè¿°}
- ...
```

### 13.2 åˆ†ç±»è§„èŒƒ

| åˆ†ç±» | Emoji | è¯´æ˜ | ç¤ºä¾‹ |
|:---:|:---:|:---:|:---|
| æ–°å¢åŠŸèƒ½ | âœ¨ | æ–°åŠŸèƒ½ã€æ–°ç‰¹æ€§ | æ–°å¢è‰²ç›²æ¨¡æ‹Ÿé¢„è§ˆåŠŸèƒ½ |
| é—®é¢˜ä¿®å¤ | ğŸ”§ | Bugä¿®å¤ | ä¿®å¤å…¨å±æŒ‰é’®çª—å£çŠ¶æ€ä¿å­˜é—®é¢˜ |
| ç•Œé¢ä¼˜åŒ– | ğŸ¨ | UIæ ·å¼ã€å¸ƒå±€è°ƒæ•´ | ä¼˜åŒ–å›¾æ ‡å’Œäº¤äº’ä½“éªŒ |
| æ€§èƒ½æå‡ | âš¡ | æ€§èƒ½ä¼˜åŒ– | ä¼˜åŒ–åº”ç”¨å¯åŠ¨é€Ÿåº¦ |
| ä»£ç é‡æ„ | ğŸ—ï¸ | ä»£ç ç»“æ„è°ƒæ•´ | é‡å‘½åé…è‰²ç®¡ç†ç›¸å…³ç±» |
| æ–‡æ¡£æ›´æ–° | ğŸ“ | æ–‡æ¡£ä¿®æ”¹ | ä¿®æ­£ç‰ˆæƒå’Œå®˜ç½‘ä¿¡æ¯ |
| å†…å®¹è°ƒæ•´ | ğŸ“‹ | å†…å®¹ä¿®æ”¹ | ä¸ºå›¾æ ‡å¢åŠ åœ†è§’è£åˆ‡ |

### 13.3 å†…å®¹ç»„ç»‡åŸåˆ™

**åŠŸèƒ½æ¨¡å—åˆ†ç»„ï¼š**
- å°†ç›¸å…³çš„åŠŸèƒ½æŒ‰æ¨¡å—åˆ†ç»„ï¼Œä½¿ç”¨ç²—ä½“æ ‡æ³¨æ¨¡å—åç§°
- ç¤ºä¾‹ï¼šè‰²å½©åˆ†æå¢å¼ºã€é…è‰²ç®¡ç†ã€ç•Œé¢ä¼˜åŒ–ç­‰

**æ¡ç›®æ’åºï¼š**
1. åŒä¸€åˆ†ç±»å†…ï¼ŒæŒ‰é‡è¦æ€§æˆ–ç›¸å…³æ€§æ’åº
2. ç›¸å…³çš„ä¿®å¤å’Œä¼˜åŒ–å¯åˆå¹¶æè¿°

**è¡¨è¿°è§„èŒƒï¼š**
- ä½¿ç”¨åŠ¨è¯å¼€å¤´ï¼šæ–°å¢ã€ä¿®å¤ã€ä¼˜åŒ–ã€è°ƒæ•´ã€é‡æ„
- æè¿°ç®€æ´æ¸…æ™°ï¼Œé¿å…è¿‡äºæŠ€æœ¯åŒ–çš„æœ¯è¯­
- æ¶‰åŠæ–‡ä»¶æˆ–ç±»åæ—¶ï¼Œä½¿ç”¨ä»£ç æ ¼å¼æ ‡æ³¨

### 13.4 ç‰ˆæœ¬å·æ ¼å¼

- æ ¼å¼ï¼š`ä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.ä¿®è®¢ç‰ˆæœ¬`
- ç¤ºä¾‹ï¼š`1.2.0`
- ä¸»ç‰ˆæœ¬ï¼šé‡å¤§åŠŸèƒ½æ›´æ–°æˆ–æ¶æ„å˜æ›´
- æ¬¡ç‰ˆæœ¬ï¼šæ–°å¢åŠŸèƒ½
- ä¿®è®¢ç‰ˆæœ¬ï¼šBugä¿®å¤å’Œå¾®è°ƒ

### 13.5 å®Œæ•´ç¤ºä¾‹

```markdown
# ğŸ¨ å–è‰²å¡ v1.2 æ›´æ–°æ—¥å¿—

## âœ¨ æ–°å¢åŠŸèƒ½

**è‰²å½©åˆ†æå¢å¼º**
- æ–°å¢è‰²å½©æå–é¡µé¢é«˜é¥±å’Œåº¦/é«˜æ˜åº¦åŒºåŸŸæ˜¾ç¤ºåŠŸèƒ½ï¼Œæ”¯æŒè‡ªå®šä¹‰é˜ˆå€¼é…ç½®
- RGBç›´æ–¹å›¾æ·»åŠ é€šé“åˆ‡æ¢æŒ‰é’®ï¼Œæ”¯æŒå•é€šé“æˆ–å…¨é€šé“æ˜¾ç¤º
- åœ¨è‰²ç¯å‘¨å›´æ˜¾ç¤ºè‰²ç›¸åç§°æ ‡ç­¾

**é…è‰²é¢„è§ˆé¢æ¿**
- æ–°å¢é…è‰²é¢„è§ˆé¢æ¿ï¼Œæ”¯æŒ10ç§åœºæ™¯çš„é¢„è§ˆ
- æ”¯æŒå¯¼å…¥SVGæ–‡ä»¶é¢„è§ˆ
- å³é”®èœå•å¯åˆ é™¤é¢œè‰²å’Œå¤åˆ¶HEXå€¼

## ğŸ”§ é—®é¢˜ä¿®å¤

- ä¿®å¤å¢åŠ è‰²å½©æå–é‡‡æ ·ç‚¹æ•°åæ–°è‰²å¡ä¿¡æ¯ä¸æ›´æ–°çš„é—®é¢˜
- ä¿®å¤å…¨å±æŒ‰é’®çª—å£çŠ¶æ€ä¿å­˜ä¸æœ€å¤§åŒ–æ··æ·†çš„é—®é¢˜
- ä¿®å¤Win10æ·±è‰²æ¨¡å¼é€‚é…é—®é¢˜

## ğŸ¨ ç•Œé¢ä¼˜åŒ–

- ç§»é™¤æ”¶è—é¡µé¢æ“ä½œæŒ‰é’®çš„Tooltip
- ä¼˜åŒ–å›¾æ ‡å’Œäº¤äº’ä½“éªŒï¼Œç¦ç”¨åŸç”Ÿå³é”®èœå•

## âš¡ æ€§èƒ½æå‡

- ä¼˜åŒ–åº”ç”¨å¯åŠ¨é€Ÿåº¦ï¼šè‰²è½®ç¼“å­˜å’Œé…è‰²æ–¹æ¡ˆé¢œè‰²å»¶è¿Ÿç”Ÿæˆ

## ğŸ—ï¸ ä»£ç é‡æ„

- å°†è‰²å¡æ”¶è—é¢æ¿é‡å‘½åä¸ºé…è‰²ç®¡ç†ï¼Œé…è‰²æ–¹æ¡ˆé¢æ¿é‡å‘½åä¸ºé…è‰²ç”Ÿæˆ
- ç»Ÿä¸€é…è‰²ç®¡ç†å¯¼å…¥å¯¼å‡ºJSONæ ¼å¼
```

---

## 14. é…ç½®ç®¡ç†è§„èŒƒ

### 14.1 é…ç½®ç®¡ç†æ¨¡å—

ä½¿ç”¨ `core/config.py` ç»Ÿä¸€ç®¡ç†åº”ç”¨ç¨‹åºçŠ¶æ€ã€‚

- é…ç½®æ–‡ä»¶ï¼šJSON æ ¼å¼ï¼Œå­˜å‚¨åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„ `.color_card/config.json`
- ä½¿ç”¨å•ä¾‹æ¨¡å¼è·å–å…¨å±€é…ç½®ç®¡ç†å™¨å®ä¾‹

### 14.2 é…ç½®é¡¹è¯´æ˜

|é…ç½®é”® |ç±»å‹ |é»˜è®¤å€¼ |è¯´æ˜ |
|:---:|:---:|:---:|:---|
|`settings.hex_visible` |bool |true |æ˜¯å¦æ˜¾ç¤º16è¿›åˆ¶é¢œè‰²å€¼ |
|`settings.color_modes` |list |["HSB", "LAB"] |è‰²å¡ä¸­æ˜¾ç¤ºçš„è‰²å½©æ¨¡å¼ |
|`settings.color_sample_count` |int |5 |è‰²å½©æå–é‡‡æ ·ç‚¹æ•°é‡ |
|`window.width` |int |940 |çª—å£å®½åº¦ |
|`window.height` |int |660 |çª—å£é«˜åº¦ |
|`window.is_maximized` |bool |false |çª—å£æ˜¯å¦æœ€å¤§åŒ– |
|`window.is_fullscreen` |bool |false |çª—å£æ˜¯å¦å…¨å± |
|`favorites` |list |[] |æ”¶è—çš„é…è‰²åˆ—è¡¨ |

### 14.3 ä½¿ç”¨ç¤ºä¾‹

```python
from core import get_config_manager

config_manager = get_config_manager()
config = config_manager.load()

# è·å–é…ç½®é¡¹
hex_visible = config_manager.get('settings.hex_visible', True)

# è®¾ç½®é…ç½®é¡¹
config_manager.set('settings.hex_visible', False)
config_manager.save()
```


---

## 15. è°ƒè¯•è§„èŒƒ

### 15.1 æ—¥å¿—ç®¡ç†

**åŸºæœ¬åŸåˆ™ï¼š**

- ä½¿ç”¨ `print()` è¯­å¥è¿›è¡Œè°ƒè¯•
- å…³é”®æ“ä½œåº”è®°å½•è°ƒè¯•ä¿¡æ¯ï¼Œä¾¿äºè°ƒè¯•å’Œé—®é¢˜è¿½è¸ª


### 15.2 AIè¾…åŠ©è°ƒè¯•

**æ—¥å¿—æŸ¥çœ‹æµç¨‹ï¼š**


1. åº”ç”¨ç¨‹åºå¯åŠ¨å¤±è´¥æ—¶ï¼ŒæŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºå®šä½é—®é¢˜
2. åŠŸèƒ½æ‰§è¡Œå‡ºç°å¼‚å¸¸æ—¶ï¼Œåˆ†æé”™è¯¯ä¿¡æ¯
3. ç»“åˆä»£ç ä¸Šä¸‹æ–‡ï¼Œç†è§£é”™è¯¯åŸå› 
4. æ ¹æ®æ—¥å¿—ä¿¡æ¯åˆ¶å®šä¿®å¤æ–¹æ¡ˆ


---

## 16. é‡æ„è§„èŒƒ

### 16.1 é‡æ„åŸåˆ™


1. **ä¿æŒåŠŸèƒ½ä¸å˜**ï¼šé‡æ„è¿‡ç¨‹ä¸­ä¸æ”¹å˜ç°æœ‰åŠŸèƒ½
2. **æ¸è¿›å¼é‡æ„**ï¼šåˆ†é˜¶æ®µè¿›è¡Œï¼Œæ¯é˜¶æ®µå¯ç‹¬ç«‹éªŒè¯
3. **å…ˆæ•´ç†åé‡æ„**ï¼šå…ˆè§„èŒƒç°æœ‰ä»£ç ï¼Œå†æå–åŸºç±»ï¼Œæœ€åé‡ç»„ç›®å½•
4. **ä»£ç æ¸…ç†åŒæ­¥**ï¼šä¿®æ”¹ä»£ç æ—¶åŒæ­¥æ¸…ç†ç›¸å…³é‡å¤ä»£ç 

### 16.2 åŸºç±»æå–è§„èŒƒ

**æ­¥éª¤ï¼š**


1. åˆ†æç›¸ä¼¼ç»„ä»¶çš„å…¬å…±é€»è¾‘
2. è®¾è®¡åŸºç±»æ¥å£ï¼ˆæŠ½è±¡æ–¹æ³•ï¼‰
3. è¿ç§»ç¬¬ä¸€ä¸ªå­ç±»ï¼ŒéªŒè¯åŸºç±»è®¾è®¡
4. è¿ç§»å…¶ä»–å­ç±»
5. å…¨é¢æµ‹è¯•éªŒè¯

**ç¤ºä¾‹ï¼š**

```python
# åŸºç±»å®šä¹‰
class BaseCanvas(QWidget):
    def _draw_overlay(self, painter: QPainter):
        """ç»˜åˆ¶å åŠ å†…å®¹ï¼ˆå­ç±»å¿…é¡»å®ç°ï¼‰"""
        raise NotImplementedError("å­ç±»å¿…é¡»å®ç° _draw_overlay æ–¹æ³•")

# å­ç±»å®ç°
class ImageCanvas(BaseCanvas):
    def _draw_overlay(self, painter: QPainter):
        """ç»˜åˆ¶å–è‰²ç‚¹"""
        # å…·ä½“å®ç°...
```

### 16.3 æ¨¡å—åˆå¹¶è§„èŒƒ

**åˆå¹¶åŸåˆ™ï¼š**

- å°†ç´§å¯†ç›¸å…³çš„ç±»åˆå¹¶åˆ°åŒä¸€æ–‡ä»¶
- é¿å…è¿‡åº¦æ‹†åˆ†ï¼Œæé«˜ä»£ç å¯ç»´æŠ¤æ€§
- ä¿æŒæ¨¡å—åŒ–ï¼Œä½†å‡å°‘æ–‡ä»¶æ•°é‡

**ç¤ºä¾‹ï¼š**

- `cards.py`ï¼šåˆå¹¶ ColorCardã€LuminanceCard åŠç›¸å…³åŸºç±»
- `histograms.py`ï¼šåˆå¹¶ LuminanceHistogramWidgetã€RGBHistogramWidget åŠåŸºç±»
- `canvases.py`ï¼šåˆå¹¶ BaseCanvasã€ImageCanvasã€LuminanceCanvas


---

## 17. å¼€å‘ç»éªŒæ€»ç»“

> **è¯¦ç»†å†…å®¹è¯·å‚é˜…**ï¼š[å¼€å‘ç»éªŒæ€»ç»“.md](å¼€å‘ç»éªŒæ€»ç»“.md)

å¼€å‘ç»éªŒæ€»ç»“åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š

- é…è‰²ç”ŸæˆåŠŸèƒ½å¼€å‘ç»éªŒ
- å¸ƒå±€è®¾è®¡æœ€ä½³å®è·µ
- æ”¶è—åŠŸèƒ½å¼€å‘ç»éªŒ
- å¯¼å…¥å¯¼å‡ºåŠŸèƒ½å¼€å‘ç»éªŒ
- MessageBoxä½¿ç”¨æœ€ä½³å®è·µ
- é…ç½®æ•°æ®è¿ç§»å®è·µ
- å†…ç½®è‰²å½©å¤šæ®µæ˜¾ç¤ºç»éªŒ

---

## 18. å¼€æºè®¸å¯è¯ç®¡ç†è§„èŒƒ

### 18.1 è®¸å¯è¯ç®¡ç†æ¦‚è¿°

æœ¬é¡¹ç›®é‡‡ç”¨ **GPLv3** ä½œä¸ºä¸»è®¸å¯è¯ï¼Œä½¿ç”¨äº†å¤šä¸ªç¬¬ä¸‰æ–¹åº“å’Œå¼€å‘å·¥å…·ï¼Œæ¯ä¸ªéƒ½æœ‰å…¶è‡ªå·±çš„å¼€æºè®¸å¯è¯ã€‚å®Œæ•´çš„è®¸å¯è¯ç®¡ç†æ˜¯å¼€æºé¡¹ç›®åˆè§„æ€§çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚

**æ¶‰åŠçš„è®¸å¯è¯ç±»å‹ï¼š**

|ç±»å‹ |è®¸å¯è¯ |ç”¨é€” |
|:---:|:---:|:---:|
|ä¸»é¡¹ç›® |GPLv3 |å–è‰²å¡é¡¹ç›®æœ¬èº« |
|ç¬¬ä¸‰æ–¹åº“ |LGPL-3.0 |PySide6 |
|ç¬¬ä¸‰æ–¹åº“ |GPLv3 |PySide6-Fluent-Widgets |
|ç¬¬ä¸‰æ–¹åº“ |MIT |Pillow |
|ç¬¬ä¸‰æ–¹åº“ |Apache-2.0 |requests |
|ç¬¬ä¸‰æ–¹åº“ |BSD-3-Clause |numpy |
|ç¬¬ä¸‰æ–¹åº“ |MIT |Open Color |
|ç¬¬ä¸‰æ–¹åº“ |MIT |Tailwind CSS Colors |
|ç¬¬ä¸‰æ–¹åº“ |MIT |Nice Color Palettes |
|å·¥å…·é“¾ |MIT |auto-py-to-exe |
|å·¥å…·é“¾ |GPLv2+ |UPX |
|å·¥å…·é“¾ |Modified BSD |Inno Setup |

### 18.2 è®¸å¯è¯æ–‡ä»¶ç®¡ç†

**å¿…é¡»ç»´æŠ¤çš„è®¸å¯è¯æ–‡ä»¶ï¼š**


1. **LICENSE** - ä¸»è®¸å¯è¯æ–‡æœ¬æ–‡ä»¶
   - åŒ…å«å®Œæ•´çš„ GPLv3 è®¸å¯è¯æ–‡æœ¬
   - åŒ…å«æ‰€æœ‰ç¬¬ä¸‰æ–¹åº“çš„å®Œæ•´è®¸å¯è¯ä¿¡æ¯
   - åŒ…å«å¼€å‘å·¥å…·é“¾çš„å®Œæ•´è®¸å¯è¯ä¿¡æ¯
   - ä½¿ç”¨ç»Ÿä¸€çš„æ–‡æœ¬æ ¼å¼ï¼ˆ`====` å’Œ `----` åˆ†éš”çº¿ï¼‰
2. **file/LICENSE.html** - HTML æ ¼å¼çš„è®¸å¯è¯æ–‡ä»¶
   - ç”¨äºåº”ç”¨ç¨‹åºå†…æ˜¾ç¤º
   - åŒ…å«æ ¼å¼åŒ–çš„ HTML æ ·å¼
   - ä¸æ–‡æœ¬ç‰ˆ LICENSE å†…å®¹ä¿æŒä¸€è‡´

### 18.3 ç¬¬ä¸‰æ–¹åº“è®¸å¯è¯ä¿¡æ¯æ”¶é›†è§„èŒƒ

**æ”¶é›†å†…å®¹æ¸…å•ï¼š**

|ä¿¡æ¯é¡¹ |è¯´æ˜ |ç¤ºä¾‹ |
|:---:|:---|:---|
|åº“åç§° |å®Œæ•´çš„åº“åç§° |PySide6 |
|ç‰ˆæœ¬è¦æ±‚ |é¡¹ç›®ä½¿ç”¨çš„ç‰ˆæœ¬èŒƒå›´ |>=6.0.0 |
|è®¸å¯è¯ç±»å‹ |SPDX æ ‡è¯†ç¬¦ |LGPL-3.0 |
|ç‰ˆæƒæ‰€æœ‰ |ä½œè€…æˆ–ç»„ç»‡åç§° |The Qt Company |
|é¡¹ç›®åœ°å€ |å®˜æ–¹ç½‘ç«™æˆ–ä»“åº“åœ°å€ |https://www.qt.io/ |
|å®Œæ•´è®¸å¯è¯æ–‡æœ¬ |å®˜æ–¹è®¸å¯è¯å…¨æ–‡ |ä»å®˜æ–¹ç½‘ç«™è·å– |

**æ”¶é›†æ¸ é“ï¼š**

- å®˜æ–¹ GitHub ä»“åº“çš„ LICENSE æ–‡ä»¶
- å®˜æ–¹ç½‘ç«™è®¸å¯è¯é¡µé¢
- PyPI é¡¹ç›®é¡µé¢çš„å…ƒæ•°æ®
- æºç åŒ…ä¸­çš„ LICENSE æ–‡ä»¶

### 18.4 è®¸å¯è¯æ–‡æœ¬æ ¼å¼è§„èŒƒ

**æ–‡æœ¬ç‰ˆ LICENSE æ ¼å¼ï¼š**

```
================================================================================
ç¬¬ä¸‰æ–¹åº“è®¸å¯è¯
--------------------------------------------------------------------------------
æœ¬é¡¹ç›®ä½¿ç”¨äº†ä»¥ä¸‹ç¬¬ä¸‰æ–¹åº“ï¼Œæ¯ä¸ªåº“éƒ½æœ‰å…¶è‡ªå·±çš„å¼€æºè®¸å¯è¯ï¼š

================================================================================
1. åº“åç§° (è®¸å¯è¯ç±»å‹)
--------------------------------------------------------------------------------
ç‰ˆæƒæ‰€æœ‰ï¼šä½œè€…/ç»„ç»‡åç§°
é¡¹ç›®åœ°å€ï¼šhttps://example.com/
è®¸å¯è¯ï¼šå®Œæ•´è®¸å¯è¯åç§°

--------------------------------------------------------------------------------
[å®Œæ•´çš„è®¸å¯è¯æ–‡æœ¬]

================================================================================
2. ä¸‹ä¸€ä¸ªåº“...
```

**æ ¼å¼è¦æ±‚ï¼š**

- ä½¿ç”¨ `====`ï¼ˆ80ä¸ªå­—ç¬¦ï¼‰ä½œä¸ºç« èŠ‚åˆ†éš”çº¿
- ä½¿ç”¨ `----`ï¼ˆ80ä¸ªå­—ç¬¦ï¼‰ä½œä¸ºå­ç« èŠ‚åˆ†éš”çº¿
- æ¯ä¸ªåº“ç‹¬ç«‹æˆèŠ‚ï¼Œç¼–å·æ’åº
- è®¸å¯è¯æ–‡æœ¬ä¿æŒåŸå§‹æ ¼å¼ï¼Œä¸ä¿®æ”¹å†…å®¹
- LGPL è®¸å¯è¯éœ€æ³¨æ˜å¼•ç”¨ GPL çš„æ¡æ¬¾

### 18.5 å…³äºçª—å£è®¸å¯è¯æ˜¾ç¤ºè§„èŒƒ

**å…³äºå¯¹è¯æ¡†å¿…é¡»åŒ…å«çš„ä¿¡æ¯ï¼š**

```python
def _get_about_text(self):
    return """
    ã€å¼€æºé¡¹ç›®ä½¿ç”¨è¯´æ˜ã€‘
      â€¢ æœ¬ç¨‹åºåŸºäº PySide6 æ¶æ„å¼€å‘
        ç‰ˆæƒæ‰€æœ‰ï¼šThe Qt Company
        è®¸å¯è¯ï¼šLGPL v3
        å®˜ç½‘ï¼šhttps://www.qt.io/

      â€¢ æœ¬ç¨‹åº UI ç»„ä»¶ä½¿ç”¨ PySide6-Fluent-Widgets
        ç‰ˆæƒæ‰€æœ‰ï¼šzhiyiYo
        è®¸å¯è¯ï¼šGPLv3
        é¡¹ç›®åœ°å€ï¼šhttps://github.com/zhiyiYo/PyQt-Fluent-Widgets
    
    ã€å¼€å‘å·¥å…·é“¾ã€‘
      â€¢ æœ¬ç¨‹åºä½¿ç”¨ auto-py-to-exe å·¥å…·æ‰“åŒ…
        ç‰ˆæƒæ‰€æœ‰ï¼šBrent Vollebregt
        è®¸å¯è¯ï¼šMIT
        é¡¹ç›®åœ°å€ï¼šhttps://github.com/brentvollebregt/auto-py-to-exe
    """
```

**æ˜¾ç¤ºè¦æ±‚ï¼š**

- æ¯ä¸ªåº“å¿…é¡»åŒ…å«ï¼šç‰ˆæƒæ‰€æœ‰ã€è®¸å¯è¯ç±»å‹ã€é¡¹ç›®åœ°å€
- æŒ‰ç±»åˆ«åˆ†ç»„ï¼ˆå¼€æºé¡¹ç›®ã€å¼€å‘å·¥å…·é“¾ï¼‰
- æ ¼å¼ç»Ÿä¸€ï¼Œä¾¿äºé˜…è¯»

### 18.6 è®¸å¯è¯å…¼å®¹æ€§æ£€æŸ¥

**å…¼å®¹æ€§åŸåˆ™ï¼š**

|ä¸»è®¸å¯è¯ |å…¼å®¹çš„è®¸å¯è¯ |ä¸å…¼å®¹çš„è®¸å¯è¯ |
|:---:|:---:|:---:|
|GPLv3 |LGPL-3.0, MIT, Apache-2.0, BSD |ä¸“æœ‰è®¸å¯è¯ |

**æ£€æŸ¥æ¸…å•ï¼š**

- [ ] æ‰€æœ‰ç¬¬ä¸‰æ–¹è®¸å¯è¯ä¸ GPLv3 å…¼å®¹
- [ ] æ‰€æœ‰è®¸å¯è¯æ–‡æœ¬å®Œæ•´ä¸”æœ€æ–°
- [ ] æ‰€æœ‰ç‰ˆæƒä¿¡æ¯å‡†ç¡®æ— è¯¯
- [ ] æ‰€æœ‰é¡¹ç›®é“¾æ¥å¯è®¿é—®
- [ ] LGPL å¼•ç”¨ GPL çš„è¯´æ˜æ¸…æ™°

### 18.7 è®¸å¯è¯æ›´æ–°æµç¨‹

**æ–°å¢ç¬¬ä¸‰æ–¹åº“æ—¶çš„æ­¥éª¤ï¼š**


1. **ä¿¡æ¯æ”¶é›†**
   - æ”¶é›†åº“åç§°ã€ç‰ˆæœ¬ã€è®¸å¯è¯ç±»å‹
   - è·å–ç‰ˆæƒæ‰€æœ‰è€…ä¿¡æ¯
   - è·å–é¡¹ç›®åœ°å€
   - ä¸‹è½½å®Œæ•´è®¸å¯è¯æ–‡æœ¬
2. **å…¼å®¹æ€§éªŒè¯**
   - ç¡®è®¤è®¸å¯è¯ä¸ GPLv3 å…¼å®¹
   - æ£€æŸ¥è®¸å¯è¯ç‰ˆæœ¬æ˜¯å¦æœ€æ–°
3. **æ–‡ä»¶æ›´æ–°**
   - æ›´æ–° LICENSE æ–‡æœ¬æ–‡ä»¶
   - æ›´æ–° file/LICENSE.html
   - æ›´æ–°å…³äºçª—å£çš„ `_get_about_text()`
4.  **éªŒè¯æµ‹è¯•**
   - æ£€æŸ¥æ–‡æœ¬æ ¼å¼æ˜¯å¦æ­£ç¡®
   - éªŒè¯é“¾æ¥å¯è®¿é—®æ€§
   - ç¡®è®¤æ‰€æœ‰æ–‡ä»¶å†…å®¹ä¸€è‡´

### 18.8 å¸¸è§è®¸å¯è¯æ–‡æœ¬è·å–åœ°å€

|è®¸å¯è¯ |å®˜æ–¹åœ°å€ |
|:---:|:---|
|GPLv3 |https://www.gnu.org/licenses/gpl-3.0.txt |
|LGPLv3 |https://www.gnu.org/licenses/lgpl-3.0.txt |
|MIT |https://opensource.org/licenses/MIT |
|Apache-2.0 |https://www.apache.org/licenses/LICENSE-2.0.txt |
|BSD-3-Clause |https://opensource.org/licenses/BSD-3-Clause |
|GPLv2 |https://www.gnu.org/licenses/gpl-2.0.txt |

### 18.9 æ³¨æ„äº‹é¡¹

**å¿…é¡»é¿å…çš„é—®é¢˜ï¼š**


1. **ä¸è¦é—æ¼ç‰ˆæƒå£°æ˜**
   - æ¯ä¸ªç¬¬ä¸‰æ–¹åº“éƒ½å¿…é¡»æœ‰æ˜ç¡®çš„ç‰ˆæƒå£°æ˜
   - ä¸èƒ½åªåˆ—å‡ºåº“åå’Œè®¸å¯è¯ç±»å‹
2. **ä¸è¦ä¿®æ”¹è®¸å¯è¯æ–‡æœ¬**
   - ä¿æŒè®¸å¯è¯æ–‡æœ¬çš„åŸå§‹å†…å®¹
   - ä¸è¦åˆ é™¤æˆ–æ·»åŠ ä»»ä½•å†…å®¹
3. **ä¸è¦é—æ¼å·¥å…·é“¾**
   - æ‰“åŒ…å·¥å…·ã€å‹ç¼©å·¥å…·ã€å®‰è£…ç¨‹åºåˆ¶ä½œå·¥å…·éƒ½éœ€è¦å£°æ˜
   - è¿™äº›å·¥å…·çš„è®¸å¯è¯åŒæ ·éœ€è¦å®Œæ•´åˆ—å‡º
4. **ä¿æŒæ ¼å¼ä¸€è‡´**
   - LICENSE å’Œ LICENSE.html å†…å®¹è¦ä¸€è‡´
   - ä½¿ç”¨ç»Ÿä¸€çš„æ ¼å¼é£æ ¼
5. **LGPL ç‰¹æ®Šå¤„ç†**
   - LGPL æ˜¯ GPL çš„è¡¥å……ï¼Œéœ€è¦æ˜ç¡®è¯´æ˜å¼•ç”¨å…³ç³»
   - åœ¨ LGPL ç« èŠ‚å¼€å¤´è¯´æ˜å…¶å¼•ç”¨äº† GPL çš„æ¡æ¬¾

---

## 19. é™„å½•

### 19.1  è§„èŒƒç»´æŠ¤

**æœ¬è§„èŒƒå°†æ ¹æ®é¡¹ç›®å‘å±•è¿›è¡Œæ›´æ–°ï¼Œä»¥é€‚åº”æ–°çš„åŠŸèƒ½éœ€æ±‚å’ŒæŠ€æœ¯å˜åŒ–ã€‚**

### 19.2 ç‰ˆæœ¬å†å²   

|ç‰ˆæœ¬ |æ—¥æœŸ |å˜æ›´å†…å®¹ |
|:---:|:---:|:---:|
|3.1 |2026-02-16 |æ–°å¢ç¬¬8ç« é…è‰²æ•°æ®JSONæ ¼å¼è§„èŒƒï¼šè¯´æ˜ç»Ÿä¸€çš„ palettes æ ¼å¼ã€groups å­—æ®µã€ç¤¾åŒºè´¡çŒ®æŒ‡å—ï¼›ç« èŠ‚åºå·é¡ºå»¶è°ƒæ•´ |
|3.0 |2026-02-13 |æ–‡æ¡£é‡æ„ï¼šæ‹†åˆ†ä¸ºæ ¸å¿ƒåŸåˆ™ã€å®Œæ•´ç‰ˆã€ç»éªŒæ€»ç»“ä¸‰ä¸ªç‹¬ç«‹æ–‡æ¡£ï¼›åˆå¹¶ç¬¬9ç« å’Œç¬¬10ç« å¸ƒå±€è§„èŒƒï¼›ç¬¬14ç« å¼€å‘ç»éªŒæ€»ç»“ç‹¬ç«‹ä¸º `å¼€å‘ç»éªŒæ€»ç»“.md` |
|2.21 |2026-02-11 |ä¼˜åŒ–å†…ç½®è‰²å½©å’Œé…è‰²ç®¡ç†çš„è‰²å¡å¸ƒå±€ï¼šå°† QGridLayout æ”¹ä¸º QVBoxLayout + QHBoxLayout ç»„åˆå¸ƒå±€ï¼Œå®ç°æ¯è¡Œè‰²å¡æ•°é‡ä¸åŒæ—¶ä»èƒ½è‡ªé€‚åº”å æ»¡æ•´è¡Œå®½åº¦ï¼›æ–°å¢ç½‘æ ¼å¸ƒå±€è‡ªé€‚åº”å®½åº¦ç»éªŒï¼ˆç¬¬10ç« ï¼‰ï¼ŒåŒ…å«é—®é¢˜åˆ†æã€è§£å†³æ–¹æ¡ˆã€ä»£ç ç¤ºä¾‹å’Œå†³ç­–åŸåˆ™ |
|2.20 |2026-02-11 |å®Œå–„é…è‰²é¢„è§ˆåœºæ™¯åŠŸèƒ½ï¼šæ–°å¢ brandï¼ˆå“ç‰Œï¼‰ã€posterï¼ˆæµ·æŠ¥ï¼‰ã€patternï¼ˆå›¾æ¡ˆï¼‰ã€magazineï¼ˆæ‚å¿—æ’ç‰ˆï¼‰å››ä¸ªé…ç½®åŒ–åœºæ™¯ï¼›æ‰€æœ‰åœºæ™¯å®Œå…¨é…ç½®åŒ–ï¼Œä» `scenes.json` åŠ è½½ï¼›æ¸…ç† `ui/preview_widgets.py` ä¸­çš„ç¡¬ç¼–ç æ–‡æœ¬ï¼ŒUI/Web åœºæ™¯æ–‡æœ¬æ”¯æŒé€šè¿‡é…ç½®è‡ªå®šä¹‰ï¼›åˆ é™¤åºŸå¼ƒçš„ `MobileUIPreview` å’Œ `WebPreview` ç±»ï¼Œç»Ÿä¸€ä½¿ç”¨ `ConfigurablePreviewScene`ï¼›æ›´æ–°å¼€å‘è§„èŒƒæ–‡æ¡£ï¼ˆç¬¬8ç« åœºæ™¯ç±»å‹è§„èŒƒï¼‰ |
|2.19 |2026-02-11 |æ–°å¢SVGæ™ºèƒ½é…è‰²æ˜ å°„åŠŸèƒ½ï¼šåˆ›å»º `core/svg_color_mapper.py` æ ¸å¿ƒæ¨¡å—ï¼Œå®ç° SVG è§£æã€å…ƒç´ åˆ†ç±»ã€æ™ºèƒ½é…è‰²æ˜ å°„ï¼›æ”¯æŒæ™ºèƒ½é…è‰²æ˜ å°„æ¨¡å¼ï¼›æ”¯æŒ CSS ç±»æ ·å¼è§£æï¼ˆIllustrator å¯¼å‡ºçš„ SVG å¸¸ç”¨æ ¼å¼ï¼‰ï¼›åŸºäºå…ƒç´ é¢ç§¯çš„æ™ºèƒ½é…è‰²æ˜ å°„ç®—æ³•ï¼›æ£€æµ‹ SVG æ˜¯å¦æœ‰èƒŒæ™¯å…ƒç´ ï¼Œä¸ºé€æ˜èƒŒæ™¯è‡ªåŠ¨æ·»åŠ èƒŒæ™¯çŸ©å½¢ï¼›æ›´æ–° `SVGPreviewWidget` æ”¯æŒæ–°çš„é…è‰²æ˜ å°„åŠŸèƒ½ï¼›æ›´æ–°é¡¹ç›®ç»“æ„å’Œå¼€å‘è§„èŒƒ |
|2.18 |2026-02-10 |æ–°å¢åœºæ™¯é…ç½®åŒ–åŠŸèƒ½ï¼šåˆ›å»º `preview_scenes/` ç›®å½•å’Œ `scenes.json` é…ç½®æ–‡ä»¶ï¼›æ–°å¢ `SceneConfigManager` åœºæ™¯é…ç½®ç®¡ç†å™¨ï¼Œæ”¯æŒåœºæ™¯çš„å¯¼å…¥å¯¼å‡ºï¼›æ–°å¢ `BasePreviewScene` åœºæ™¯åŸºç±»å’Œ `PreviewSceneFactory` åœºæ™¯å·¥å‚ï¼›å®ç° `MobileUIPreview` æ‰‹æœºUIé¢„è§ˆå’Œ `WebPreview` ç½‘é¡µé¢„è§ˆç»„ä»¶ï¼›æ›´æ–° `PreviewSceneSelector` ä»é…ç½®åŠ¨æ€åŠ è½½åœºæ™¯åˆ—è¡¨ï¼›æ‰€æœ‰åœºæ™¯æ”¯æŒå¯¼å…¥å¯¼å‡ºé…ç½®ï¼›æ›´æ–°é¡¹ç›®ç»“æ„å’Œå¼€å‘è§„èŒƒï¼ˆç¬¬8ç« ï¼‰ |
|2.17 |2026-02-10 |é‡å‘½å"é…è‰²æ–¹æ¡ˆ"ä¸º"é…è‰²ç”Ÿæˆ"ï¼Œ"è‰²å½©ç®¡ç†"ä¸º"é…è‰²ç®¡ç†"ï¼šå°† `scheme_widgets.py` é‡å‘½åä¸º `generation_widgets.py`ï¼Œç±»å `SchemeColorInfoCard` æ”¹ä¸º `GenerationColorInfoCard`ï¼Œ`SchemeColorPanel` æ”¹ä¸º `GenerationColorPanel`ï¼›å°† `color_management_widgets.py` é‡å‘½åä¸º `palette_management_widgets.py`ï¼Œç±»å `ColorManagementSchemeCard` æ”¹ä¸º `PaletteManagementCard`ï¼Œ`ColorManagementSchemeList` æ”¹ä¸º `PaletteManagementList`ï¼›æ›´æ–°æ‰€æœ‰ç›¸å…³å¼•ç”¨ã€å¯¼èˆªæ æ˜¾ç¤ºå’Œæ–‡æ¡£ |
|2.16 |2026-02-10 |æ–°å¢é…è‰²é¢„è§ˆåŠŸèƒ½ï¼šåˆ›å»º ui/preview_widgets.py é…è‰²é¢„è§ˆç»„ä»¶æ¨¡å—ï¼ŒåŒ…å«å¯æ‹–æ‹½é¢œè‰²åœ†ç‚¹ã€æ’ç”»é¢„è§ˆã€æ’ç‰ˆé¢„è§ˆç­‰ç»„ä»¶ï¼›æ–°å¢ ColorPreviewInterface ç•Œé¢ï¼Œæ”¯æŒä»é…è‰²ç®¡ç†é¡µé¢è·³è½¬é¢„è§ˆé…è‰²åœ¨ä¸åŒåœºæ™¯ä¸‹çš„åº”ç”¨æ•ˆæœ |
|2.15 |2026-02-09 |ä¼˜åŒ–åº”ç”¨å¯åŠ¨é€Ÿåº¦ï¼šè‰²è½®ç¼“å­˜å’Œé…è‰²ç”Ÿæˆé¢œè‰²æ”¹ç”¨å»¶è¿Ÿç”Ÿæˆï¼Œé¿å…é˜»å¡å¯åŠ¨ï¼›æ–°å¢åº”ç”¨å¯åŠ¨ä¼˜åŒ–ç­–ç•¥è§„èŒƒï¼ˆ7.3èŠ‚ï¼‰ |
|2.14 |2026-02-09 |é‡å‘½å"è‰²å¡æ”¶è—"é¢æ¿ä¸º"è‰²å½©ç®¡ç†"ï¼šå°† `favorite_widgets.py` é‡å‘½åä¸º `color_management_widgets.py`ï¼Œç±»å `FavoritesInterface` æ”¹ä¸º `ColorManagementInterface`ï¼Œæ›´æ–°æ‰€æœ‰ç›¸å…³å¼•ç”¨å’Œå¯¼èˆªæ æ˜¾ç¤º |
|2.13 |2026-02-09 |ä¼˜åŒ–é…è‰²æ–¹æ¡ˆéšæœºç®—æ³•ï¼šæ‰€æœ‰é…è‰²æ–¹æ¡ˆç”Ÿæˆå‡½æ•°æ·»åŠ  `base_saturation` å‚æ•°ï¼Œæ”¯æŒåŸºäºåŸºå‡†é¥±å’Œåº¦çš„éšæœºå˜åŒ–ï¼Œæ›´æ–°é…è‰²æ–¹æ¡ˆç®—æ³•è®¾è®¡è§„èŒƒï¼ˆ14.1.1èŠ‚ï¼‰ |
|2.12 |2026-02-09 |ä¿®å¤HSBè‰²è½®æ˜åº¦è®¡ç®—é—®é¢˜ï¼šæ»‘å—èŒƒå›´æ”¹ä¸º10-100ç›´æ¥å¯¹åº”Bå€¼ç™¾åˆ†æ¯”ï¼Œç»Ÿä¸€è‰²è½®å’Œè‰²å—é¢æ¿çš„å…¨å±€æ˜åº¦å€¼é€»è¾‘ï¼Œæ›´æ–°è‰²è½®äº¤äº’è®¾è®¡è§„èŒƒï¼ˆ14.1.4èŠ‚ï¼‰ |
|2.11 |2026-02-08 |æ–°å¢å¼€æºè®¸å¯è¯ç®¡ç†è§„èŒƒï¼ˆç¬¬15ç« ï¼‰ï¼Œæ€»ç»“ç‰ˆæƒå®Œå–„è®¡åˆ’æ‰§è¡Œç»éªŒï¼ŒåŒ…å«è®¸å¯è¯æ”¶é›†ã€æ ¼å¼è§„èŒƒã€å…¼å®¹æ€§æ£€æŸ¥ã€æ›´æ–°æµç¨‹ç­‰å®Œæ•´è§„èŒƒ |
|2.10 |2026-02-07 |æ–°å¢ä¿¡å·å¾ªç¯é¢„é˜²è§„èŒƒï¼ˆ5.3èŠ‚ï¼‰ã€QThreadå–æ¶ˆæœºåˆ¶ï¼ˆ7.3èŠ‚ï¼‰ï¼›å®ç°åŒé¢æ¿ç‹¬ç«‹å›¾ç‰‡å¯¼å…¥ã€åˆ†é˜¶æ®µå›¾ç‰‡åŠ è½½ï¼ˆæ¨¡ç³Šé¢„è§ˆâ†’å®Œæ•´å›¾ç‰‡â†’æ›´æ–°ç›´æ–¹å›¾ï¼‰ã€è¿›åº¦æ˜¾ç¤ºåŠŸèƒ½ |
|2.9 |2026-02-07 |æ–°å¢ä¸»é¢˜é¢œè‰²ç®¡ç†è§„èŒƒï¼ˆ5.5èŠ‚ï¼‰ï¼Œåˆ›å»º ui/theme_colors.py ç»Ÿä¸€é¢œè‰²ç®¡ç†ï¼Œæ¶ˆé™¤æ‰€æœ‰ç¡¬ç¼–ç é¢œè‰²å€¼ |
|2.8 |2026-02-06 |æ–°å¢å·¥å…·æ /æŒ‰é’®å®¹å™¨é—´è·è§„èŒƒï¼Œè¡¥å…… QSplitter åˆ†éš”æ¡æ ·å¼æ³¨æ„äº‹é¡¹ |
|2.7 |2026-02-06 |è¡¥å……æ¸è¿›å¼å‹ç¼©è®¾è®¡åŸåˆ™å’Œå®é™…æ¡ˆä¾‹ï¼Œæ›´æ–°æ§ä»¶å°ºå¯¸å‚è€ƒè¡¨ï¼ˆå¢åŠ ç´§å‡‘å°ºå¯¸åˆ—ï¼‰ï¼Œå®Œå–„å¸ƒå±€å‹ç¼©çš„æœ€ä½³å®è·µ |
|2.6 |2026-02-06 |æ–°å¢é˜²æ­¢å¸ƒå±€é‡å çš„è§„èŒƒï¼ˆ8.2èŠ‚ï¼‰ï¼ŒåŒ…å«minimumSizeã€sizePolicyã€å›ºå®šå°ºå¯¸æ›¿ä»£æ–¹æ¡ˆç­‰æœ€ä½³å®è·µï¼Œæ›´æ–°æ§ä»¶å°ºå¯¸å‚è€ƒè¡¨ |
|2.5 |2026-02-06 |æ–°å¢æ”¶è—åŠŸèƒ½ï¼ˆæ”¶è—é…è‰²æ–¹æ¡ˆã€æ‰¹é‡å¯¼å…¥å¯¼å‡ºã€æ”¶è—ç®¡ç†ï¼‰ï¼Œæ–°å¢MessageBoxä½¿ç”¨è§„èŒƒã€é…ç½®æ•°æ®è¿ç§»å®è·µã€åŠ¨æ€å¡ç‰‡ç®¡ç† |
|2.4 |2026-02-06 |é…è‰²ç”Ÿæˆé¢æ¿UIä¼˜åŒ–ï¼ˆè‰²è½®å®¹å™¨åŒ–ã€è‡ªé€‚åº”å¤§å°ã€QSplitterå¸ƒå±€ï¼‰ï¼Œæ–°å¢å¸ƒå±€è®¾è®¡æœ€ä½³å®è·µç»éªŒ |
|2.3 |2026-02-06 |æ–°å¢é…è‰²ç”ŸæˆåŠŸèƒ½ï¼ˆ5ç§é…è‰²ç®—æ³•ã€å¯äº¤äº’è‰²ç¯ã€é…è‰²ç”Ÿæˆç»„ä»¶ï¼‰ï¼Œæ›´æ–°é¡¹ç›®ç»“æ„ï¼Œæ–°å¢å¼€å‘ç»éªŒæ€»ç»“ç« èŠ‚ |
|2.2 |2026-02-05 |é‡æ„é¡¹ç›®ç»“æ„ï¼Œæå–å…¬å…±åŸºç±»ï¼ˆBaseCanvasã€BaseCardã€BaseHistogramï¼‰ï¼Œæ‰å¹³åŒ–ç›®å½•ç»“æ„ï¼Œæ›´æ–°æ–‡æ¡£ |
|2.1 |2026-02-04 |å€Ÿé‰´BetterGI æ˜Ÿè½¨å¼€å‘è§„èŒƒï¼Œæ–°å¢å¯¼å…¥è§„èŒƒã€ä»£ç æ¸…ç†åŸåˆ™ã€å¼‚å¸¸å¤„ç†è§„èŒƒã€æ€§èƒ½ä¼˜åŒ–å»ºè®®ã€è°ƒè¯•è§„èŒƒ |
|2.0 |2026-02-04 |é‡æ„æ–‡æ¡£ç»“æ„ï¼Œç²¾ç®€å†—ä½™å†…å®¹ï¼Œä¼˜åŒ–ç‰ˆæœ¬å·ä½“ç³» |
|1.0 |2026-02-03 |åˆå§‹ç‰ˆæœ¬ï¼Œå»ºç«‹åŸºç¡€å¼€å‘è§„èŒƒ |