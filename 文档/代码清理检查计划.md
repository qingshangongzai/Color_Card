# 代码清理检查计划

## 本次重构任务：任务 3.6 直方图计算优化

### 发现的冗余代码

#### 1. `ui/histograms.py` - `HueHistogramWidget._calculate_hue_histogram()` 方法

**位置**：`ui/histograms.py` 第 829-856 行

**问题**：
- 该方法已在 `core/histogram_service.py` 中的 `HistogramCalculator._calculate_hue_histogram()` 实现
- `HueHistogramWidget` 现在使用 `HistogramService` 异步计算，不再需要本地计算方法

**清理方案**：
- 删除 `HueHistogramWidget._calculate_hue_histogram()` 方法
- 删除未使用的 `colorsys` 导入（如果其他地方未使用）

#### 2. `ui/histograms.py` - 未使用的导入检查

**当前导入**：
```python
from core import calculate_histogram, calculate_rgb_histogram, get_zone_bounds, HistogramService
```

**检查**：
- `calculate_histogram` - 仍被 `LuminanceHistogramWidget.set_image()` 的同步版本使用，但现已改为异步，可能不再需要
- `calculate_rgb_histogram` - 仍被 `RGBHistogramWidget.set_image()` 的同步版本使用，但现已改为异步，可能不再需要
- `get_zone_bounds` - 仍在 `_draw_custom_overlay` 中使用，保留

**清理方案**：
- 删除 `calculate_histogram` 和 `calculate_rgb_histogram` 导入

### 文件变更清单

#### 修改文件
1. `ui/histograms.py`
   - 删除 `HueHistogramWidget._calculate_hue_histogram()` 方法（约28行）
   - 删除 `colorsys` 导入（如果未在其他地方使用）
   - 删除 `calculate_histogram` 和 `calculate_rgb_histogram` 导入

### 验证步骤
1. 语法检查通过
2. 应用程序启动正常
3. 直方图功能正常工作

### 预期代码行数变化
- `ui/histograms.py`: 约 -30 行
